{"version":3,"file":"","sourceroot":"","sources":["template/template.js","utils/util.js","app.js","components/chatroom/chatroom.js","pages/Creat_Sell_post/Creat_Sell_post.js","pages/addFunction/addFunction.js","pages/chooseLib/chooseLib.js","pages/databaseGuide/databaseGuide.js","pages/deployFunctions/deployFunctions.js","pages/im/im.js","pages/im/room/room.js","pages/index/index.js","pages/openapi/callback/callback.js","pages/openapi/cloudid/cloudid.js","pages/openapi/openapi.js","pages/openapi/serverapi/serverapi.js","pages/storageConsole/storageConsole.js","pages/userConsole/userConsole.js","pages/utils/utils.js","pages/First_page/First_page.js","pages/Login/Login.js","pages/Main_page/Main_page.js","pages/Creat_Topic/Creat_Topic.js","pages/Choose_Type/Choose_Type.js","pages/Mine_page/Mine_page.js","pages/Reply_page/Reply_page.js","pages/Up_Invitation/Up_Invitation.js","pages/Mine_Reply/Mine_Reply.js","pages/Mine_Mypost/Mine_Mypost.js","pages/Mine_message/Mine_message.js","pages/chat/chat.js"],"names":["module","exports","tabbar","bindName","arguments","length","undefined","id","target","that","bindData","otabbar","current","pagePath","iconPath","selectedIconPath","text","setData","formatNumber","n","toString","formatTime","date","year","Date","getFullYear","month","getMonth","day","getDate","hour","getHours","minute","getMinutes","second","getSeconds","map","join","App","onLaunch","wx","cloud","init","env","traceUser","console","error","this","globalData","_try2","_onScrollToUpper","_onChooseImage","_onConfirmSendText","_initWatch","_initOpenID","_initRoom","SETDATA_SCROLL_TO_BOTTOM","scrollTop","scrollWithAnimation","Component","properties","envId","String","collection","groupId","groupName","userInfo","Object","onGetUserInfo","type","Function","getOpenID","data","chats","textInputValue","openId","scrollToMessage","hasKeyboard","methods","e","mergeCommonCriteria","criteria","_objectSpread","initRoom","_asyncToGenerator2","default","_regenerator","mark","_callee2","_this","wrap","_context2","prev","next","try","_callee","_this$properties","db","_","_yield$db$collection$","initList","_context","initOpenID","database","command","where","orderBy","get","sent","log","reverse","initWatch","sendTimeTS","gt","stop","apply","_callee4","_this2","_context4","abrupt","_callee3","_context3","_callee5","_this3","_context5","warn","messageListener","watch","onChange","onRealtimeMessageSnapshot","bind","onError","inited","fatalRebuildCount","showError","_x","snapshot","_this4","concat","_toConsumableArray2","docs","sort","x","y","scrollToBottom","_step","hasNewMessage","hasOthersMessage","_iterator","_createForOfIteratorHelper","docChanges","_loop","docChange","value","queueType","doc","_openid","ind","findIndex","chat","_id","msgType","tempFilePath","splice","push","s","done","err","f","onConfirmSendText","_callee7","_this5","_context7","_callee6","_context6","detail","Math","random","now","avatar","avatarUrl","nickName","textContent","sendTime","writeStatus","add","_x2","onChooseImage","_callee10","_this6","_context10","chooseImage","count","sourceType","success","_success","_callee9","res","_this6$properties","_context9","tempFilePaths","uploadFile","cloudPath","match","filePath","config","_callee8","_context8","imgFileID","fileID","fail","onProgressUpdate","_ref5","progress","_x4","_x3","onMessageImageTap","previewImage","urls","dataset","fileid","force","_this7","createSelectorQuery","select","boundingClientRect","bodyRect","scrollOffset","scroll","height","scrollHeight","exec","onScrollToUpper","_callee11","_this$data$chats","_yield$this$db$collec","_context11","lt","unshift","_callee12","fn","title","_context12","t0","_x5","_x6","content","confirmText","confirmCallback","showModal","showCancel","confirm","ready","global","chatroom","Page","onLoad","options","onReady","onShow","onHide","onUnload","onPullDownRefresh","onReachBottom","onShareAppMessage","result","canIUseClipboard","canIUse","copyCode","setClipboardData","showToast","testFunction","callFunction","name","a","b","JSON","stringify","icon","app","getApp","step","counterId","openid","queryResult","onAdd","onQuery","onCounterInc","onCounterDec","onRemove","nextStep","callback","group","groupEnd","prevStep","goHome","pages","getCurrentPages","navigateBack","redirectTo","url","reLaunch","_getOpenID","logged","takeSession","requestResult","chatRoomCollection","chatRoomGroupId","chatRoomGroupName","getSetting","authSetting","getUserInfo","getSystemInfo","safeArea","_res$safeArea","top","bottom","containerStyle","test","system","windowHeight","_yield$wx$cloud$callF","path","onGetOpenid","navigateTo","doUpload","sizeType","showLoading","imagePath","complete","hideLoading","onCustomerServiceButtonClick","weRunResult","userInfoResult","onGetWeRunData","getWeRunData","info","CloudID","cloudID","then","catch","action","openData","list","templateMessageResult","wxacodeSrc","wxacodeResult","showClearWXACodeCache","submitTemplateMessageForm","formId","onGetWXACode","getStorageSync","setStorageSync","clearWXACodeCache","removeStorageSync","_app$globalData","setStorage","key","switchTab","duration","require","Username","Last_to_Reply","Last_toup_Time","User_head_url","Creat_user_Time","UserIdArry","Array","UserUpId","navbar","currentTab","DataPostArry","UserHeadurlArry","UpArray","UsernameArry","UserId","replyData","myimg","navbarTap","currentTarget","idx","get_DBinf","getStorage","upclickbutton","nowindex","postopenid","nowup","_defineProperty2","Up_Post_id","post_id","Up_id","Time_s","Post_id","image","Remove_Post","youid","to_Reply","userid","i","alldata","indexOf","item","get_inf_db","Promise","all","in","j","ex","util","index","number","PostType","user_openid","telValue","UserInfo","getInput","bindPickerChange","clickimage","Filepath","addImage","deleteImage","cancel","upload","Context","Photo_arr","Reply_Record_num","Up_Record_num","Time","Type","parseInt","mask","Touch","Temp_Type","touch_id","replyNumber","toupNumber","chatNumber","hiddenmodalput","Join_Time","U_id","Oldname","modalinput","Usernewname","User_inf_id","ChangeName","discussbutton","time","getTime","upbutton","hideTabBarRedDot","Nowtime","PostUserId","buypostopenid","uploadhead","User_head","exp","ShowAboutus","toMinemypost","discussShow","inputMessage","SendTime","HeadImageUrl","UserName","PageId","UpPageId","RemoveId","ReplyOpenId","PageData","dataArray","PostUserData","actionSheetTap","actionSheetHidden","actionSheetbindchange","bindMenu1","menu","formSubmit","userName","update","context","PageTime","Page_id","sucesss","showNavigationBarLoading","myOpenId","color1","color2","size1","size2","flag","upList","click","searchAssistantUp","someUpAssistant","_that$setData","upUserTimeHour","upUserTimeDay","upUserId","upPostId","substr","_that$setData3","headUrl","_loop2","_that$setData4","upOpenId","_that$setData6","gotoPost","discussList","discussMe","myDiscuss","discussUserId","discussPostId","discussTimeHour","discussTimeDay","_that$setData2","postUserName","postHeadUrl","postContext","postOpenid","_that$setData5","allId","allUpId","DataPost_arry","User_head_url_arry","Up_array","Username_arry","get_Sell_DBinf","wantList","wantListYou","gotoChat","heopenid","youWant","wantOpenid","wantUserTimeDay","wantMyGoodsId","buy_Post_id","saleType","iWant","show","myName","heName","myUrl","heUrl","chatId","chatMyOpenid","chatYouOpenid","chatList","sendInf","replace","iChatyou","youChatMe","youOpenid","who"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","sourcesContent":["//初始化数据\nfunction tabbarinit() {\n return [\n      { \n      \"current\":0,\n     \"pagePath\": \"/pages/Main_page/Main_page\",\n      \"iconPath\": \"/images/sys.png\",\n     \"selectedIconPath\": \"/images/sy.png\",\n      \"text\": \"广场\"\n      },\n      {\n        \"current\": 0,\n        \"pagePath\": \"/pages/news/news\",\n        \"iconPath\": \"/images/Creat_Topic/fbs.Creat_Topic\",\n        \"selectedIconPath\": \"/images/fb.png\",\n        \"text\": \"发布\"\n\n      },\n      {\n        \"current\": 0,\n        \"pagePath\": \"/pages/index/index\",\n        \"iconPath\": \"/images/mines.png\",\n        \"selectedIconPath\": \"/images/mine.png\",\n        \"text\": \"我的\"\n      }   \n    ]\n}\n\nfunction tabbarmain(bindName = \"tabdata\", id, target) {\n  var that = target;\n  var bindData = {};\n  var otabbar = tabbarinit();\n  otabbar[id]['iconPath'] = otabbar[id]['selectedIconPath']//换当前的icon\n  otabbar[id]['current'] = 1;\n  bindData[bindName] = otabbar\n  that.setData({ bindData });\n}\n\n\nmodule.exports = {\n  tabbar: tabbarmain\n}","const formatTime = date => {\n  var date=new Date(date)\n  const year = date.getFullYear()\n  const month = date.getMonth() + 1\n  const day = date.getDate()\n  const hour = date.getHours()\n  const minute = date.getMinutes()\n  const second = date.getSeconds()\n\n  return [year, month, day].map(formatNumber).join('-') + ' ' + [hour, minute, second].map(formatNumber).join(':')\n}\n\nconst formatNumber = n => {\n  n = n.toString()\n  return n[1] ? n : '0' + n\n}\n\nmodule.exports = {\n  formatTime: formatTime\n}\n","//app.js\nApp({\n  onLaunch: function () {\n    \n    if (!wx.cloud) {\n      console.error('请使用 2.2.3 或以上的基础库以使用云能力')\n    } else {\n      wx.cloud.init({\n        env:'mfg-6gia7x6l0f60f614',\n        traceUser: true,\n      })\n    }\n\n    this.globalData = {\n      \n    }\n  }\n})\n","const FATAL_REBUILD_TOLERANCE = 10\nconst SETDATA_SCROLL_TO_BOTTOM = {\n  scrollTop: 100000,\n  scrollWithAnimation: true,\n}\n\nComponent({\n  properties: {\n    envId: String,\n    collection: String,\n    groupId: String,\n    groupName: String,\n    userInfo: Object,\n    onGetUserInfo: {\n      type: Function,\n    },\n    getOpenID: {\n      type: Function,\n    },\n  },\n\n  data: {\n    chats: [],\n    textInputValue: '',\n    openId: '',\n    scrollTop: 0,\n    scrollToMessage: '',\n    hasKeyboard: false,\n  },\n\n  methods: {\n    onGetUserInfo(e) {\n      this.properties.onGetUserInfo(e)\n    },\n\n    getOpenID() { \n      return this.properties.getOpenID() \n    },\n\n    mergeCommonCriteria(criteria) {\n      return {\n        groupId: this.data.groupId,\n        ...criteria,\n      }\n    },\n\n    async initRoom() {\n      this.try(async () => {\n        await this.initOpenID()\n\n        const { envId, collection } = this.properties\n        this.db = wx.cloud.database({\n          env: envId,\n        })\n        const db = this.db\n        const _ = db.command\n\n        const { data: initList } = await db.collection(collection).where(this.mergeCommonCriteria()).orderBy('sendTimeTS', 'desc').get()\n\n        console.log('init query chats', initList)\n\n        this.setData({\n          chats: initList.reverse(),\n          scrollTop: 10000,\n        })\n\n        this.initWatch(initList.length ? {\n          sendTimeTS: _.gt(initList[initList.length - 1].sendTimeTS),\n        } : {})\n      }, '初始化失败')\n    },\n\n    async initOpenID() {\n      return this.try(async () => {\n        const openId = await this.getOpenID()\n\n        this.setData({\n          openId,\n        })\n      }, '初始化 openId 失败')\n    },\n\n    async initWatch(criteria) {\n      this.try(() => {\n        const { collection } = this.properties\n        const db = this.db\n        const _ = db.command\n\n        console.warn(`开始监听`, criteria)\n        this.messageListener = db.collection(collection).where(this.mergeCommonCriteria(criteria)).watch({\n          onChange: this.onRealtimeMessageSnapshot.bind(this),\n          onError: e => {\n            if (!this.inited || this.fatalRebuildCount >= FATAL_REBUILD_TOLERANCE) {\n              this.showError(this.inited ? '监听错误，已断开' : '初始化监听失败', e, '重连', () => {\n                this.initWatch(this.data.chats.length ? {\n                  sendTimeTS: _.gt(this.data.chats[this.data.chats.length - 1].sendTimeTS),\n                } : {})\n              })\n            } else {\n              this.initWatch(this.data.chats.length ? {\n                sendTimeTS: _.gt(this.data.chats[this.data.chats.length - 1].sendTimeTS),\n              } : {})\n            }\n          },\n        })\n      }, '初始化监听失败')\n    },\n\n    onRealtimeMessageSnapshot(snapshot) {\n      console.warn(`收到消息`, snapshot)\n\n      if (snapshot.type === 'init') {\n        this.setData({\n          chats: [\n            ...this.data.chats,\n            ...[...snapshot.docs].sort((x, y) => x.sendTimeTS - y.sendTimeTS),\n          ],\n        })\n        this.scrollToBottom()\n        this.inited = true\n      } else {\n        let hasNewMessage = false\n        let hasOthersMessage = false\n        const chats = [...this.data.chats]\n        for (const docChange of snapshot.docChanges) {\n          switch (docChange.queueType) {\n            case 'enqueue': {\n              hasOthersMessage = docChange.doc._openid !== this.data.openId\n              const ind = chats.findIndex(chat => chat._id === docChange.doc._id)\n              if (ind > -1) {\n                if (chats[ind].msgType === 'image' && chats[ind].tempFilePath) {\n                  chats.splice(ind, 1, {\n                    ...docChange.doc,\n                    tempFilePath: chats[ind].tempFilePath,\n                  })\n                } else chats.splice(ind, 1, docChange.doc)\n              } else {\n                hasNewMessage = true\n                chats.push(docChange.doc)\n              }\n              break\n            }\n          }\n        }\n        this.setData({\n          chats: chats.sort((x, y) => x.sendTimeTS - y.sendTimeTS),\n        })\n        if (hasOthersMessage || hasNewMessage) {\n          this.scrollToBottom()\n        }\n      }\n    },\n\n    async onConfirmSendText(e) {\n      this.try(async () => {\n        if (!e.detail.value) {\n          return\n        }\n\n        const { collection } = this.properties\n        const db = this.db\n        const _ = db.command\n\n        const doc = {\n          _id: `${Math.random()}_${Date.now()}`,\n          groupId: this.data.groupId,\n          avatar: this.data.userInfo.avatarUrl,\n          nickName: this.data.userInfo.nickName,\n          msgType: 'text',\n          textContent: e.detail.value,\n          sendTime: new Date(),\n          sendTimeTS: Date.now(), // fallback\n        }\n\n        this.setData({\n          textInputValue: '',\n          chats: [\n            ...this.data.chats,\n            {\n              ...doc,\n              _openid: this.data.openId,\n              writeStatus: 'pending',\n            },\n          ],\n        })\n        this.scrollToBottom(true)\n\n        await db.collection(collection).add({\n          data: doc,\n        })\n\n        this.setData({\n          chats: this.data.chats.map(chat => {\n            if (chat._id === doc._id) {\n              return {\n                ...chat,\n                writeStatus: 'written',\n              }\n            } else return chat\n          }),\n        })\n      }, '发送文字失败')\n    },\n\n    async onChooseImage(e) {\n      wx.chooseImage({\n        count: 1,\n        sourceType: ['album', 'camera'],\n        success: async res => {\n          const { envId, collection } = this.properties\n          const doc = {\n            _id: `${Math.random()}_${Date.now()}`,\n            groupId: this.data.groupId,\n            avatar: this.data.userInfo.avatarUrl,\n            nickName: this.data.userInfo.nickName,\n            msgType: 'image',\n            sendTime: new Date(),\n            sendTimeTS: Date.now(), // fallback\n          }\n\n          this.setData({\n            chats: [\n              ...this.data.chats,\n              {\n                ...doc,\n                _openid: this.data.openId,\n                tempFilePath: res.tempFilePaths[0],\n                writeStatus: 0,\n              },\n            ]\n          })\n          this.scrollToBottom(true)\n\n          const uploadTask = wx.cloud.uploadFile({\n            cloudPath: `${this.data.openId}/${Math.random()}_${Date.now()}.${res.tempFilePaths[0].match(/\\.(\\w+)$/)[1]}`,\n            filePath: res.tempFilePaths[0],\n            config: {\n              env: envId,\n            },\n            success: res => {\n              this.try(async () => {\n                await this.db.collection(collection).add({\n                  data: {\n                    ...doc,\n                    imgFileID: res.fileID,\n                  },\n                })\n              }, '发送图片失败')\n            },\n            fail: e => {\n              this.showError('发送图片失败', e)\n            },\n          })\n\n          uploadTask.onProgressUpdate(({ progress }) => {\n            this.setData({\n              chats: this.data.chats.map(chat => {\n                if (chat._id === doc._id) {\n                  return {\n                    ...chat,\n                    writeStatus: progress,\n                  }\n                } else return chat\n              })\n            })\n          })\n        },\n      })\n    },\n\n    onMessageImageTap(e) {\n      wx.previewImage({\n        urls: [e.target.dataset.fileid],\n      })\n    },\n\n    scrollToBottom(force) {\n      if (force) {\n        console.log('force scroll to bottom')\n        this.setData(SETDATA_SCROLL_TO_BOTTOM)\n        return\n      }\n\n      this.createSelectorQuery().select('.body').boundingClientRect(bodyRect => {\n        this.createSelectorQuery().select(`.body`).scrollOffset(scroll => {\n          if (scroll.scrollTop + bodyRect.height * 3 > scroll.scrollHeight) {\n            console.log('should scroll to bottom')\n            this.setData(SETDATA_SCROLL_TO_BOTTOM)\n          }\n        }).exec()\n      }).exec()\n    },\n\n    async onScrollToUpper() {\n      if (this.db && this.data.chats.length) {\n        const { collection } = this.properties\n        const _ = this.db.command\n        const { data } = await this.db.collection(collection).where(this.mergeCommonCriteria({\n          sendTimeTS: _.lt(this.data.chats[0].sendTimeTS),\n        })).orderBy('sendTimeTS', 'desc').get()\n        this.data.chats.unshift(...data.reverse())\n        this.setData({\n          chats: this.data.chats,\n          scrollToMessage: `item-${data.length}`,\n          scrollWithAnimation: false,\n        })\n      }\n    },\n\n    async try(fn, title) {\n      try {\n        await fn()\n      } catch (e) {\n        this.showError(title, e)\n      }\n    },\n\n    showError(title, content, confirmText, confirmCallback) {\n      console.error(title, content)\n      wx.showModal({\n        title,\n        content: content.toString(),\n        showCancel: confirmText ? true : false,\n        confirmText,\n        success: res => {\n          res.confirm && confirmCallback()\n        },\n      })\n    },\n  },\n\n  ready() {\n    global.chatroom = this\n    this.initRoom()\n    this.fatalRebuildCount = 0\n  },\n})\n","// pages/Creat_Sell_post/Creat_Sell_post.js\nPage({\n\n  /**\n   * 页面的初始数据\n   */\n  data: {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n})","// pages/addFunction/addFunction.js\n\nconst code = `// 云函数入口函数\nexports.main = async (event, context) => {\n  console.log(event)\n  console.log(context)\n  return {\n    sum: event.a + event.b\n  }\n}`\n\nPage({\n\n  data: {\n    result: '',\n    canIUseClipboard: wx.canIUse('setClipboardData'),\n  },\n\n  onLoad: function (options) {\n\n  },\n\n  copyCode: function() {\n    wx.setClipboardData({\n      data: code,\n      success: function () {\n        wx.showToast({\n          title: '复制成功',\n        })\n      }\n    })\n  },\n\n  testFunction() {\n    wx.cloud.callFunction({\n      name: 'sum',\n      data: {\n        a: 1,\n        b: 2\n      },\n      success: res => {\n        wx.showToast({\n          title: '调用成功',\n        })\n        this.setData({\n          result: JSON.stringify(res.result)\n        })\n      },\n      fail: err => {\n        wx.showToast({\n          icon: 'none',\n          title: '调用失败',\n        })\n        console.error('[云函数] [sum] 调用失败：', err)\n      }\n    })\n  },\n\n})\n\n","// pages/chooseLib/chooseLib.js\nPage({\n\n  /**\n   * 页面的初始数据\n   */\n  data: {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n})\n","// pages/databaseGuide/databaseGuide.js\n\nconst app = getApp()\n\nPage({\n\n  data: {\n    step: 1,\n    counterId: '',\n    openid: '',\n    count: null,\n    queryResult: '',\n  },\n\n  onLoad: function (options) {\n    if (app.globalData.openid) {\n      this.setData({\n        openid: app.globalData.openid\n      })\n    }\n  },\n\n  onAdd: function () {\n    // const db = wx.cloud.database()\n    // db.collection('counters').add({\n    //   data: {\n    //     count: 1\n    //   },\n    //   success: res => {\n    //     // 在返回结果中会包含新创建的记录的 _id\n    //     this.setData({\n    //       counterId: res._id,\n    //       count: 1\n    //     })\n    //     wx.showToast({\n    //       title: '新增记录成功',\n    //     })\n    //     console.log('[数据库] [新增记录] 成功，记录 _id: ', res._id)\n    //   },\n    //   fail: err => {\n    //     wx.showToast({\n    //       icon: 'none',\n    //       title: '新增记录失败'\n    //     })\n    //     console.error('[数据库] [新增记录] 失败：', err)\n    //   }\n    // })\n  },\n\n  onQuery: function() {\n    // const db = wx.cloud.database()\n    // // 查询当前用户所有的 counters\n    // db.collection('counters').where({\n    //   _openid: this.data.openid\n    // }).get({\n    //   success: res => {\n    //     this.setData({\n    //       queryResult: JSON.stringify(res.data, null, 2)\n    //     })\n    //     console.log('[数据库] [查询记录] 成功: ', res)\n    //   },\n    //   fail: err => {\n    //     wx.showToast({\n    //       icon: 'none',\n    //       title: '查询记录失败'\n    //     })\n    //     console.error('[数据库] [查询记录] 失败：', err)\n    //   }\n    // })\n  },\n\n  onCounterInc: function() {\n    // const db = wx.cloud.database()\n    // const newCount = this.data.count + 1\n    // db.collection('counters').doc(this.data.counterId).update({\n    //   data: {\n    //     count: newCount\n    //   },\n    //   success: res => {\n    //     this.setData({\n    //       count: newCount\n    //     })\n    //   },\n    //   fail: err => {\n    //     icon: 'none',\n    //     console.error('[数据库] [更新记录] 失败：', err)\n    //   }\n    // })\n  },\n\n  onCounterDec: function() {\n    // const db = wx.cloud.database()\n    // const newCount = this.data.count - 1\n    // db.collection('counters').doc(this.data.counterId).update({\n    //   data: {\n    //     count: newCount\n    //   },\n    //   success: res => {\n    //     this.setData({\n    //       count: newCount\n    //     })\n    //   },\n    //   fail: err => {\n    //     icon: 'none',\n    //     console.error('[数据库] [更新记录] 失败：', err)\n    //   }\n    // })\n  },\n\n  onRemove: function() {\n    // if (this.data.counterId) {\n    //   const db = wx.cloud.database()\n    //   db.collection('counters').doc(this.data.counterId).remove({\n    //     success: res => {\n    //       wx.showToast({\n    //         title: '删除成功',\n    //       })\n    //       this.setData({\n    //         counterId: '',\n    //         count: null,\n    //       })\n    //     },\n    //     fail: err => {\n    //       wx.showToast({\n    //         icon: 'none',\n    //         title: '删除失败',\n    //       })\n    //       console.error('[数据库] [删除记录] 失败：', err)\n    //     }\n    //   })\n    // } else {\n    //   wx.showToast({\n    //     title: '无记录可删，请见创建一个记录',\n    //   })\n    // }\n  },\n\n  nextStep: function () {\n    // 在第一步，需检查是否有 openid，如无需获取\n    if (this.data.step === 1 && !this.data.openid) {\n      wx.cloud.callFunction({\n        name: 'login',\n        data: {},\n        success: res => {\n          app.globalData.openid = res.result.openid\n          this.setData({\n            step: 2,\n            openid: res.result.openid\n          })\n        },\n        fail: err => {\n          wx.showToast({\n            icon: 'none',\n            title: '获取 openid 失败，请检查是否有部署 login 云函数',\n          })\n          console.log('[云函数] [login] 获取 openid 失败，请检查是否有部署云函数，错误信息：', err)\n        }\n      })\n    } else {\n      const callback = this.data.step !== 6 ? function() {} : function() {\n        console.group('数据库文档')\n        console.log('https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/database.html')\n        console.groupEnd()\n      }\n\n      this.setData({\n        step: this.data.step + 1\n      }, callback)\n    }\n  },\n\n  prevStep: function () {\n    this.setData({\n      step: this.data.step - 1\n    })\n  },\n\n  goHome: function() {\n    const pages = getCurrentPages()\n    if (pages.length === 2) {\n      wx.navigateBack()\n    } else if (pages.length === 1) {\n      wx.redirectTo({\n        url: '../index/index',\n      })\n    } else {\n      wx.reLaunch({\n        url: '../index/index',\n      })\n    }\n  }\n\n})\n","// pages/deployFunctions/deployFunctions.js\nPage({\n\n  /**\n   * 页面的初始数据\n   */\n  data: {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n})\n","const app = getApp()\n\nPage({\n  data: {\n  },\n\n  onLoad: function (options) {\n    if (app.globalData.openid) {\n      this.setData({\n        openid: app.globalData.openid\n      })\n    }\n\n    console.group('数据库\"实时数据推送\"文档')\n    console.log('https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/database/realtime.html')\n    console.groupEnd()\n  },\n})\n","const app = getApp()\n\nPage({\n  data: {\n    avatarUrl: './user-unlogin.png',\n    userInfo: null,\n    logged: false,\n    takeSession: false,\n    requestResult: '',\n    // chatRoomEnvId: 'release-f8415a',\n    chatRoomCollection: 'chatroom',\n    chatRoomGroupId: 'demo',\n    chatRoomGroupName: '聊天室',\n\n    // functions for used in chatroom components\n    onGetUserInfo: null,\n    getOpenID: null,\n  },\n\n  onLoad: function() {\n    // 获取用户信息\n    wx.getSetting({\n      success: res => {\n        if (res.authSetting['scope.userInfo']) {\n          // 已经授权，可以直接调用 getUserInfo 获取头像昵称，不会弹框\n          wx.getUserInfo({\n            success: res => {\n              this.setData({\n                avatarUrl: res.userInfo.avatarUrl,\n                userInfo: res.userInfo\n              })\n            }\n          })\n        }\n      }\n    })\n\n    this.setData({\n      onGetUserInfo: this.onGetUserInfo,\n      getOpenID: this.getOpenID,\n    })\n\n    wx.getSystemInfo({\n      success: res => {\n        console.log('system info', res)\n        if (res.safeArea) {\n          const { top, bottom } = res.safeArea\n          this.setData({\n            containerStyle: `padding-top: ${(/ios/i.test(res.system) ? 10 : 20) + top}px; padding-bottom: ${20 + res.windowHeight - bottom}px`,\n          })\n        }\n      },\n    })\n  },\n\n  getOpenID: async function() {\n    if (this.openid) {\n      return this.openid\n    }\n\n    const { result } = await wx.cloud.callFunction({\n      name: 'login',\n    })\n\n    return result.openid\n  },\n\n  onGetUserInfo: function(e) {\n    if (!this.logged && e.detail.userInfo) {\n      this.setData({\n        logged: true,\n        avatarUrl: e.detail.userInfo.avatarUrl,\n        userInfo: e.detail.userInfo\n      })\n    }\n  },\n\n  onShareAppMessage() {\n    return {\n      title: '即时通信 Demo',\n      path: '/pages/im/room/room',\n    }\n  },\n})\n","//index.js\nconst app = getApp()\n\nPage({\n  data: {\n    avatarUrl: './user-unlogin.png',\n    userInfo: {},\n    logged: false,\n    takeSession: false,\n    requestResult: ''\n  },\n\n  onLoad: function() {\n    if (!wx.cloud) {\n      wx.redirectTo({\n        url: '../chooseLib/chooseLib',\n      })\n      return\n    }\n\n    // 获取用户信息\n    wx.getSetting({\n      success: res => {\n        if (res.authSetting['scope.userInfo']) {\n          // 已经授权，可以直接调用 getUserInfo 获取头像昵称，不会弹框\n          wx.getUserInfo({\n            success: res => {\n              this.setData({\n                avatarUrl: res.userInfo.avatarUrl,\n                userInfo: res.userInfo\n              })\n            }\n          })\n        }\n      }\n    })\n  },\n\n  onGetUserInfo: function(e) {\n    if (!this.data.logged && e.detail.userInfo) {\n      this.setData({\n        logged: true,\n        avatarUrl: e.detail.userInfo.avatarUrl,\n        userInfo: e.detail.userInfo\n      })\n    }\n  },\n\n  onGetOpenid: function() {\n    // 调用云函数\n    wx.cloud.callFunction({\n      name: 'login',\n      data: {},\n      success: res => {\n        console.log('[云函数] [login] user openid: ', res.result.openid)\n        app.globalData.openid = res.result.openid\n        wx.navigateTo({\n          url: '../userConsole/userConsole',\n        })\n      },\n      fail: err => {\n        console.error('[云函数] [login] 调用失败', err)\n        wx.navigateTo({\n          url: '../deployFunctions/deployFunctions',\n        })\n      }\n    })\n  },\n\n  // 上传图片\n  doUpload: function () {\n    // 选择图片\n    wx.chooseImage({\n      count: 1,\n      sizeType: ['compressed'],\n      sourceType: ['album', 'camera'],\n      success: function (res) {\n        wx.showLoading({\n          title: '上传中',\n        })\n\n        const filePath = res.tempFilePaths[0]\n        \n        // 上传图片\n        const cloudPath = `my-image${filePath.match(/\\.[^.]+?$/)[0]}`\n        wx.cloud.uploadFile({\n          cloudPath,\n          filePath,\n          success: res => {\n            console.log('[上传文件] 成功：', res)\n\n            app.globalData.fileID = res.fileID\n            app.globalData.cloudPath = cloudPath\n            app.globalData.imagePath = filePath\n            \n            wx.navigateTo({\n              url: '../storageConsole/storageConsole'\n            })\n          },\n          fail: e => {\n            console.error('[上传文件] 失败：', e)\n            wx.showToast({\n              icon: 'none',\n              title: '上传失败',\n            })\n          },\n          complete: () => {\n            wx.hideLoading()\n          }\n        })\n      },\n      fail: e => {\n        console.error(e)\n      }\n    })\n  },\n\n})\n","// miniprogram/pages/openapi/callback/callback.js\nPage({\n\n  data: {\n\n  },\n\n  onLoad: function (options) {\n\n  },\n\n  onCustomerServiceButtonClick(e) {\n    console.log(e)\n  },\n})\n","// miniprogram/pages/openapi/cloudid/cloudid.js\nPage({\n\n  data: {\n    weRunResult: '',\n    userInfoResult: '',\n  },\n\n  onGetWeRunData() {\n    wx.getWeRunData({\n      success: res => {\n        wx.cloud.callFunction({\n          name: 'echo',\n          data: {\n            // info 字段在云函数 event 对象中会被自动替换为相应的敏感数据\n            info: wx.cloud.CloudID(res.cloudID),\n          },\n        }).then(res => {\n          console.log('[onGetWeRunData] 收到 echo 回包：', res)\n\n          this.setData({\n            weRunResult: JSON.stringify(res.result),\n          })\n\n          wx.showToast({\n            title: '敏感数据获取成功',\n          })\n        }).catch(err => {\n          console.log('[onGetWeRunData] 失败：', err)\n        })\n      }\n    })\n\n  },\n\n  onGetUserInfo(e) {\n    console.log(e)\n    wx.cloud.callFunction({\n      name: 'openapi',\n      data: {\n        action: 'getOpenData',\n        openData: {\n          list: [\n            e.detail.cloudID,\n          ]\n        }\n      }\n    }).then(res => {\n      console.log('[onGetUserInfo] 调用成功：', res)\n\n      this.setData({\n        userInfoResult: JSON.stringify(res.result),\n      })\n\n      wx.showToast({\n        title: '敏感数据获取成功',\n      })\n    })\n  }\n})\n","Page({\n\n  data: {\n    templateMessageResult: '',\n    wxacodeSrc: '',\n    wxacodeResult: '',\n    showClearWXACodeCache: false,\n  },\n\n  submitTemplateMessageForm(e) {\n    this.setData({\n      templateMessageResult: '',\n    })\n\n    wx.cloud.callFunction({\n      name: 'openapi',\n      data: {\n        action: 'sendTemplateMessage',\n        formId: e.detail.formId,\n      },\n      success: res => {\n        console.warn('[云函数] [openapi] templateMessage.send 调用成功：', res)\n        wx.showModal({\n          title: '发送成功',\n          content: '请返回微信主界面查看',\n          showCancel: false,\n        })\n        wx.showToast({\n          title: '发送成功，请返回微信主界面查看',\n        })\n        this.setData({\n          templateMessageResult: JSON.stringify(res.result)\n        })\n      },\n      fail: err => {\n        wx.showToast({\n          icon: 'none',\n          title: '调用失败',\n        })\n        console.error('[云函数] [openapi] templateMessage.send 调用失败：', err)\n      }\n    })\n  },\n\n  onGetWXACode() {\n\n    this.setData({\n      wxacodeSrc: '',\n      wxacodeResult: '',\n      showClearWXACodeCache: false,\n    })\n\n    // 此处为演示，将使用 localStorage 缓存，正常开发中文件 ID 应存在数据库中\n    const fileID = wx.getStorageSync('wxacodeCloudID')\n\n    if (fileID) {\n      // 有云文件 ID 缓存，直接使用该 ID\n      // 如需清除缓存，选择菜单栏中的 “工具 -> 清除缓存 -> 清除数据缓存”，或在 Storage 面板中删掉相应的 key\n      this.setData({\n        wxacodeSrc: fileID,\n        wxacodeResult: `从本地缓存中取得了小程序码的云文件 ID`,\n        showClearWXACodeCache: true,\n      })\n      console.log(`从本地缓存中取得了小程序码的云文件 ID：${fileID}`)\n    } else {\n      wx.cloud.callFunction({\n        name: 'openapi',\n        data: {\n          action: 'getWXACode',\n        },\n        success: res => {\n          console.warn('[云函数] [openapi] wxacode.get 调用成功：', res)\n          wx.showToast({\n            title: '调用成功',\n          })\n          this.setData({\n            wxacodeSrc: res.result,\n            wxacodeResult: `云函数获取二维码成功`,\n            showClearWXACodeCache: true,\n          })\n          wx.setStorageSync('wxacodeCloudID', res.result)\n        },\n        fail: err => {\n          wx.showToast({\n            icon: 'none',\n            title: '调用失败',\n          })\n          console.error('[云函数] [openapi] wxacode.get 调用失败：', err)\n        }\n      })\n    }\n  },\n\n  clearWXACodeCache() {\n    wx.removeStorageSync('wxacodeCloudID')\n\n    this.setData({\n      wxacodeSrc: '',\n      wxacodeResult: '',\n      showClearWXACodeCache: false,\n    })\n\n    wx.showToast({\n      title: '清除成功',\n    })\n  },\n\n})\n\n","Page({\n\n  data: {\n    templateMessageResult: '',\n    wxacodeSrc: '',\n    wxacodeResult: '',\n    showClearWXACodeCache: false,\n  },\n\n  submitTemplateMessageForm(e) {\n    this.setData({\n      templateMessageResult: '',\n    })\n\n    wx.cloud.callFunction({\n      name: 'openapi',\n      data: {\n        action: 'sendTemplateMessage',\n        formId: e.detail.formId,\n      },\n      success: res => {\n        console.warn('[云函数] [openapi] templateMessage.send 调用成功：', res)\n        wx.showModal({\n          title: '发送成功',\n          content: '请返回微信主界面查看',\n          showCancel: false,\n        })\n        wx.showToast({\n          title: '发送成功，请返回微信主界面查看',\n        })\n        this.setData({\n          templateMessageResult: JSON.stringify(res.result)\n        })\n      },\n      fail: err => {\n        wx.showToast({\n          icon: 'none',\n          title: '调用失败',\n        })\n        console.error('[云函数] [openapi] templateMessage.send 调用失败：', err)\n      }\n    })\n  },\n\n  onGetWXACode() {\n\n    this.setData({\n      wxacodeSrc: '',\n      wxacodeResult: '',\n      showClearWXACodeCache: false,\n    })\n\n    // 此处为演示，将使用 localStorage 缓存，正常开发中文件 ID 应存在数据库中\n    const fileID = wx.getStorageSync('wxacodeCloudID')\n\n    if (fileID) {\n      // 有云文件 ID 缓存，直接使用该 ID\n      // 如需清除缓存，选择菜单栏中的 “工具 -> 清除缓存 -> 清除数据缓存”，或在 Storage 面板中删掉相应的 key\n      this.setData({\n        wxacodeSrc: fileID,\n        wxacodeResult: `从本地缓存中取得了小程序码的云文件 ID`,\n        showClearWXACodeCache: true,\n      })\n      console.log(`从本地缓存中取得了小程序码的云文件 ID：${fileID}`)\n    } else {\n      wx.cloud.callFunction({\n        name: 'openapi',\n        data: {\n          action: 'getWXACode',\n        },\n        success: res => {\n          console.warn('[云函数] [openapi] wxacode.get 调用成功：', res)\n          wx.showToast({\n            title: '调用成功',\n          })\n          this.setData({\n            wxacodeSrc: res.result,\n            wxacodeResult: `云函数获取二维码成功`,\n            showClearWXACodeCache: true,\n          })\n          wx.setStorageSync('wxacodeCloudID', res.result)\n        },\n        fail: err => {\n          wx.showToast({\n            icon: 'none',\n            title: '调用失败',\n          })\n          console.error('[云函数] [openapi] wxacode.get 调用失败：', err)\n        }\n      })\n    }\n  },\n\n  clearWXACodeCache() {\n    wx.removeStorageSync('wxacodeCloudID')\n\n    this.setData({\n      wxacodeSrc: '',\n      wxacodeResult: '',\n      showClearWXACodeCache: false,\n    })\n\n    wx.showToast({\n      title: '清除成功',\n    })\n  },\n\n})\n\n","// pages/storageConsole/storageConsole.js\n\nconst app = getApp()\n\nPage({\n\n  data: {\n    fileID: '',\n    cloudPath: '',\n    imagePath: '',\n  },\n\n  onLoad: function (options) {\n    const {\n      fileID,\n      cloudPath,\n      imagePath,\n    } = app.globalData\n\n    this.setData({\n      fileID,\n      cloudPath,\n      imagePath,\n    })\n\n    console.group('文件存储文档')\n    console.log('https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/storage.html')\n    console.groupEnd()\n  },\n\n})\n","// pages/userConsole/userConsole.js\nPage({\n\n  data: {\n    openid: ''\n  },\n\n  onLoad: function (options) {\n    this.setData({\n      openid: getApp().globalData.openid\n    })\n  }\n})\n","// pages/utils/utils.js\nPage({\n\n  /**\n   * 页面的初始数据\n   */\n  data: {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n})","const app=getApp()\nPage({\n  data: {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    if (!wx.cloud) {\n      wx.showToast({\n        title: '尚未登录',\n        icon: 'none',\n        duration: 1500\n      })\n      return\n    }\n    // 判断是否授权\n    wx.getSetting({\n      success: res => {\n        //console.log(res.authSetting);\n        if (res.authSetting['scope.userInfo']) {\n          // 已经授权，可以直接调用 getUserInfo 获取头像昵称，不会弹框\n          wx.cloud.callFunction({\n            name: 'login',\n            data: {},\n            success: res => {\n              //console.log('[云函数] [login] user openid: ', res.result.openid)\n              app.globalData.openid = res.result.openid\n              wx.setStorageSync(\"myOpenId\", res.result.openid);\n              wx.getUserInfo({\n                success: res => {\n                  this.setData({\n                    avatarUrl: res.userInfo.avatarUrl,\n                    userInfo: res.userInfo\n                  })\n                  wx.setStorage({\n                    key: \"Userinfo\",\n                    data: this.data.userInfo\n                  })\n                  wx.setStorage({\n                    key: \"User_openid\",\n                    data: app.globalData.openid\n                  })\n                  \n                  wx.switchTab({\n                    url: '../Main_page/Main_page',\n                  })\n                }\n              })\n\n            },\n            fail: err => {\n              console.error('[云函数] [login] 调用失败', err)\n              wx.showToast({\n                title: '云函数:调用失败',\n                icon: 'none',\n                duration: 1500\n              })\n            }\n          })\n\n        }\n        else{\n          wx.redirectTo({\n            url: '../Login/Login',\n          })\n        }\n      }\n    })\n\n  },\n})","const app = getApp()\nvar template = require('../../template/template.js');\nvar util=require('../../utils/util.js');\nPage({\n\n  data: {\n    avatarUrl: '',\n    userInfo: {},\n  },\n\nonLoad: function () {\n \n  },\n\n  onGetOpenid: function (e)  {\n    let that=this\n    wx.getUserInfo({\n      success: res => {\n        this.setData({\n          avatarUrl: res.userInfo.avatarUrl,\n          userInfo: res.userInfo\n        })\n        wx.setStorage({\n          key: \"Userinfo\",\n          data: this.data.userInfo\n        })\n        // 调用云函数\n        wx.cloud.callFunction({\n          name: 'login',\n          data: {},\n          success: res => {\n\n            console.log('[云函数] [login] user openid: ', res.result.openid)\n            app.globalData.openid = res.result.openid\n\n            wx.setStorageSync(\"myOpenId\", res.result.openid);\n            \n            const db = wx.cloud.database({ env: 'mfg-6gia7x6l0f60f614' })\n            return db.collection('Assistant_User').add({ //添加人\n              data: {\n                Username: that.data.userInfo.nickName,\n                Last_to_Reply: Date.now(),\n                Last_toup_Time: Date.now(),\n                User_head_url: that.data.userInfo.avatarUrl,\n                Creat_user_Time: Date.now()\n              }\n            }).then(res => {\n              console.log(res);\n              wx.switchTab({\n                url: '../Mine_page/Mine_page',\n              })\n            })  \n          },\n          fail: err => {\n            console.error('[云函数] [login] 调用失败', err)\n            wx.showToast({\n              title: '云函数:调用失败',\n              icon: 'none',\n              duration: 1500\n            })\n          }\n        })\n\n\n      }\n    })\n\n  }\n})","var app = getApp()\nvar util=require('../../utils/util.js');\n//var template = require('../../template/template.js');\nvar UserIdArry = new Array()\nvar UserUpId = new Array()\nvar SellUserId = new Array()\nvar SellUserUpId = new Array()\nPage({\n\n  data: {\n    navbar: ['社区广场'],\n    currentTab: 0,\n   // SellDataPostArry:[],\n   // SellUserHeadurlArry:[],\n   // SellUsernameArry:[],\n   // SellUpArray:[],\n    DataPostArry:[],\n    UserHeadurlArry:[],\n    UpArray: [],\n    UsernameArry: [],\n    UserId:'',//app.globalData.openid\n    replyData: []\n  },\n    /** \n     * 预览图片\n     */\n  previewImage: function (e) {\n    //var current = e.target.dataset.src;\n    wx.previewImage({\n      //current: current, // 当前显示图片的http链接\n      urls: [e.target.dataset.myimg], // 需要预览的图片http链接列表\n    })\n  },\n  navbarTap: function (e) {\n    this.setData({\n      currentTab: e.currentTarget.dataset.idx\n    })\n    //if (e.currentTarget.dataset.idx==0)\n    {this.get_DBinf();}\n    //else\n    //{this.get_Sell_DBinf();}\n  },\n\n  onLoad(){\n    let that=this\n    wx.getStorage({\n      key: 'Userinfo',\n      success(res) {\n        //console.log(res.data) //userinfo\n      }\n    })\n    //console.log(util.formatTime(new Date()));\n    //this.get_DBinf();\n    //this.navbarTap();\n    //this.get_Sell_DBinf();\n  },\n\n  // wanttobuy:function(e){\n\n  //   var that = this\n  //   var buyind = e.currentTarget.dataset.buyindex\n\n  //   //console.log(\"buyind:\" + buyind);\n\n  //   const buypostopenid = e.currentTarget.dataset.buypostopenid\n\n\n  //   if (this.data.SellUpArray[buyind] == 0)//说明没点赞过\n  //   {\n\n  //     var nowup = 'SellUpArray[' + buyind + ']'//设置为点赞过\n  //     this.setData({\n  //       [nowup]: 1\n  //     })\n  //     const db = wx.cloud.database({ env: 'mfg-6gia7x6l0f60f614' })\n  //     return db.collection('Assistant_Sell_Intention').add({ //添加帖子\n  //       data: {\n  //         buy_Post_id: e.currentTarget.dataset.buypost_id,\n  //         buypostopenid: e.currentTarget.dataset.buypostopenid,\n  //         Time_s: Date.now()\n  //       }\n  //     }).then(res => {\n  //       //console.log(\"Assistant_Up OK!\");\n  //       //console.log(\"Pick the post_id:\" + e.currentTarget.dataset.buypost_id);\n  //       wx.cloud.callFunction({\n  //         name: 'Assistant_Up_Sell_Intention',\n  //         data: {\n  //           buypost_id: e.currentTarget.dataset.buypost_id,\n  //         },\n  //         success: function (res) {\n  //           //console.log(\"Buy_Post OK!\");\n  //           that.get_Sell_DBinf()\n  //           wx.showToast({\n  //             title: '已意向购买',\n  //             image: '../../images/Up_heart.png',\n  //             duration: 2000\n  //           })\n  //         },\n  //         fail: err => {\n  //           //console.log('error:', err)\n  //         }\n  //       })\n  //     })\n  //   }\n  //   else {\n  //     wx.showToast({\n  //       title: '已意向购买',\n  //       image: '../../images/buy.png',\n  //       duration: 2000\n  //     })\n  //   }\n  // },\n\n  \n  upclickbutton: function (e) {\n    //点赞\n    var that = this\n    var ind = e.currentTarget.dataset.nowindex\n    //console.log(\"Post_id:\" + e.currentTarget.dataset.post_id)\n    const postuserid = e.currentTarget.dataset.postopenid\n\n    //console.log(this.data.UpArray[ind] == 0)\n\n    if (this.data.UpArray[ind] == 0)//说明没点赞过\n    {\n\n      var nowup = 'UpArray[' + ind + ']'//设置为点赞过\n      this.setData({\n        [nowup]: 1\n      })\n      const db = wx.cloud.database({ env: 'mfg-6gia7x6l0f60f614' })\n      return db.collection('Assistant_Up').add({ //添加帖子\n        data: {\n          Up_Post_id: e.currentTarget.dataset.post_id,\n          Up_id: e.currentTarget.dataset.postopenid,\n          Time_s: Date.now()\n        }\n      }).then(res => {\n        console.log(\"Assistant_Up OK!\");\n        console.log(\"Pick the post_id:\"+e.currentTarget.dataset.post_id);\n        wx.cloud.callFunction({\n          name: 'Up_Assistant_Post',\n          data: {\n            Post_id: e.currentTarget.dataset.post_id,\n          },\n          success: function (res) {\n            console.log(\"Up_Assistant_Post OK!\");\n            that.get_DBinf()\n            wx.showToast({\n              title: '已点赞',\n              image: '../../images/Up_heart.png',\n              duration: 2000\n            })\n          },\n          fail: err => {\n            console.log('error:', err)\n          }\n        })\n      })\n    }\n    else{\n      wx.showToast({\n        title: '已点赞过',\n        image: '../../images/Up_heart2.png',\n        duration: 2000\n      })\n    }\n  },\n\n  Remove_Post:function(e){\n    //删除发表的内容\n    let that = this\n    wx.showModal({\n      title: '提示',\n      content: '请问是否删除本条？',\n      success: function (res) {\n        if (res.confirm) {\n          console.log(e.currentTarget.dataset.post_id)//事件的id\n          wx.cloud.callFunction({\n            name: 'Remove_Assistant_DataSheet',\n            data: {\n              youid: e.currentTarget.dataset.post_id,\n            },\n            success: function (res) {\n              that.get_DBinf()\n            }\n          })\n        }\n      }\n    })\n  },\n\n  // Remove_Sell: function (e) {\n  //   let that = this\n  //   wx.showModal({\n  //     title: '提示',\n  //     content: '请问是否删除本条交易记录？',\n  //     success: function (res) {\n  //       if (res.confirm) {\n  //         console.log(e.currentTarget.dataset.tobuy_id)//事件的id\n  //         wx.cloud.callFunction({\n  //           name: 'Remove_Assistant_Sell',\n  //           data: {\n  //             youid: e.currentTarget.dataset.tobuy_id,\n  //           },\n  //           success: function (res) {\n  //             that.get_Sell_DBinf();\n  //           }\n  //         })\n  //       }\n  //     }\n  //   })\n  // },\n\n  to_Reply: function (e) {\n    let that = this\n    console.log(e.currentTarget.dataset.post_id);//事件的id\n    console.log(e.currentTarget.dataset.postopenid);//创建表的用户openid\n    //console.log(e.currentTarget.dataset)\n    that.setData({\n      replyData: e.currentTarget.dataset\n    })\n    console.log(that.data.replyData)\n    wx.setStorage({\n      key: \"key\",\n      data: that.data.replyData\n    })\n    wx.navigateTo({\n      url: '../Reply_page/Reply_page',\n    \n    })\n  },\n\n  onShow(){\n    this.get_DBinf();\n    //this.get_Sell_DBinf();\n  },\n\n  get_DBinf:function(){\n   let that = this\n    wx.getStorage({\n      key: 'User_openid',\n      success(res) {\n        that.setData({\n          UserId: res.data\n        })\n        ////\n        var db = wx.cloud.database()//{ env: 'mfg-6gia7x6l0f60f614' }\n        let userid = res.data;\n        //console.log(\"My openid:\"+userid);\n        db.collection('Assistant_Up').where({//获取自己的点赞列表\n          _openid: userid\n        }).get({\n          success: res => {   \n            \n            //console.log(\"点赞列表:\", res.data)\n\n            for (var i = 0; i < res.data.length; i++) {\n              UserUpId[i] = res.data[i].Up_Post_id//点赞列表赋值\n            }\n\n            db.collection('Assistant_DataSheet').get({\n              success: res => {\n                //console.log(\"Assistant_DataSheet Res\"+res);\n                that.setData({\n                  alldata: res.data//所有的用户列表数据\n                })\n                for (var i = 0; i < res.data.length; i++) {\n                  UserIdArry[i] = res.data[i]._id  //所有的用户列表_id\n                  if (UserUpId.indexOf(UserIdArry[i]) == -1) {\n                    var item = 'UpArray[' + i + ']'\n                    that.setData({\n                      [item]: 0\n                    })\n                  }\n                  else {\n                    var item = 'UpArray[' + i + ']'\n                    that.setData({\n                      [item]: 1\n                    })\n                  }\n                }\n                //console.log(that.data.UpArray)\n              }\n            })\n          },\n        })\n      }\n    })\n    const get_inf_db = wx.cloud.database()//{ env: 'mfg-6gia7x6l0f60f614' }\n    get_inf_db.collection('Assistant_DataSheet').get({\n      success: res => {\n        that.setData({\n          DataPostArry: res.data\n        })\n        Promise.all(res.data.map((item)=>{\n          return item._openid\n        })).then(res=>{\n          let _ = get_inf_db.command;\n            get_inf_db.collection('Assistant_User').where({\n              _openid: _.in(res)\n            }).get().then(res => {\n              that.data.UsernameArry = [];\n              that.data.UserHeadurlArry=[];\n              for (let i = 0; i < this.data.DataPostArry.length;i++){\n                let openId = this.data.DataPostArry[i]._openid;\n                for(let j=0;j<res.data.length;j++){\n                  if(openId == res.data[j]._openid){\n                    that.data.UsernameArry.push(res.data[j].Username);\n                    that.data.UserHeadurlArry.push(res.data[j].User_head_url);\n                  }\n                }\n              }\n              that.setData({\n                UsernameArry: that.data.UsernameArry,\n                UserHeadurlArry: that.data.UserHeadurlArry\n              });\n            })\n\n        }).catch((ex)=>{\n          console.log(ex);\n        })\n\n      }\n    })\n  },\n\n//get_Sell_DBinf:function(){\n//   let that=this\n//   wx.getStorage({\n//     key: 'User_openid',\n//     success(res) {\n//       that.setData({\n//         UserId: res.data\n//       })\n//       ////\n//       var db = wx.cloud.database()//{ env: 'mfg-6gia7x6l0f60f614' }\n//       let userid = res.data;\n//       //console.log(\"My openid:\"+userid);\n//       db.collection('Assistant_Sell_Intention').where({//获取自己的点赞列表\n//         _openid: userid\n//       }).get({\n//         success: res => {\n//           //console.log(\"点赞列表:\", res.data)\n\n//           for (var i = 0; i < res.data.length; i++) {\n//             SellUserUpId[i] = res.data[i].buy_Post_id//点赞列表赋给allUpId\n//           }\n\n//           db.collection('Assistant_Sell_DataSheet').get({\n//             success: res => {\n  \n//               that.setData({\n//                 buyalldata: res.data//所有的用户列表数据\n//               })\n//               for (var i = 0; i < res.data.length; i++) {\n//                 SellUserId[i] = res.data[i]._id  //所有的用户列表\n//                 if (SellUserUpId.indexOf(SellUserId[i]) == -1) {\n//                   var item = 'SellUpArray[' + i + ']'\n//                   that.setData({\n//                     [item]: 0\n//                   })\n//                 }\n//                 else {\n//                   var item = 'SellUpArray[' + i + ']'\n//                   that.setData({\n//                     [item]: 1\n//                   })\n//                 }\n//               }\n//               //console.log(that.data.SellUpArray)\n//             }\n//           })\n//         },\n//       })\n//     }\n//   })\n  \n//   const get_Sell_inf_db = wx.cloud.database()//{ env: 'mfg-6gia7x6l0f60f614' }\n//   get_Sell_inf_db.collection('Assistant_Sell_DataSheet').get({\n//       success: res => {\n//         that.setData({\n//           SellDataPostArry: res.data\n//         })\n//         //console.log(res.data);\n//         Promise.all(res.data.map((item) => {\n//           return item._openid\n//         })).then(res => {\n//           let _ = get_Sell_inf_db.command;\n//           get_Sell_inf_db.collection('Assistant_User').where({\n//             _openid: _.in(res)\n//           }).get().then(res => {\n//             that.data.SellUsernameArry = [];\n//             that.data.SellUserHeadurlArry = [];\n//             for (let i = 0; i < this.data.SellDataPostArry.length; i++) {\n//               let openId = this.data.SellDataPostArry[i]._openid;\n//               for (let j = 0; j < res.data.length; j++) {\n//                 if (openId == res.data[j]._openid) {\n//                   that.data.SellUsernameArry.push(res.data[j].Username);\n//                   that.data.SellUserHeadurlArry.push(res.data[j].User_head_url);\n//                 }\n//               }\n//             }\n//             that.setData({\n//               SellUsernameArry: that.data.SellUsernameArry,\n//               SellUserHeadurlArry: that.data.SellUserHeadurlArry\n//             });\n//             //console.log(that.data.SellUsernameArry)\n//           })\n\n//         }).catch((ex) => {\n//           console.log(ex);\n//         })\n//       }\n//     })\n//   },\n\n})\n\n","const app = getApp()\nvar util = require('../../utils/util.js');\nPage({\n\n  data: {\n    index: 0,\n    number: 1,\n   // array: [\"日常\", \"学习\", \"情感\", \"寻物\", \"出售\"],\n    PostType:'',\n    avatarUrl: '../../images/user-unlogin.png',\n    user_openid: app.globalData.openid,\n    telValue: \"\",\n    UserInfo:''\n\n  },\n  getInput: function (e) {\n    this.setData({\n      telValue: e.detail.value\n    })\n  },\n  bindPickerChange: function (e) {\n    this.setData({\n      index: e.detail.value\n    })\n  },\n  clickimage: function (e) {\n    var index = e.target.dataset.index\n    //var current = e.target.dataset.src;\n    wx.previewImage({\n      //current: current, // 当前显示图片的http链接\n      urls: [this.data.Filepath[index]], // 需要预览的图片http链接列表\n    })\n  },\n  addImage: function (e) {\n    var that = this\n    wx.chooseImage({\n      count: 6,\n      sizeType: ['compressed'],\n      sourceType: ['album', 'camera'],\n      success: function (res) {\n        console.log(res.tempFilePaths)\n        that.setData({\n          Filepath: res.tempFilePaths,\n          number: res.tempFilePaths.length + 1\n        })\n      }\n    })\n  },\n  deleteImage: function (e) {\n    var that = this\n    var index = e.target.dataset.index\n    console.log(\"+++++++++\", index)\n\n    var tempFilePaths = that.data.Filepath\n    wx.showModal({\n      title: '提示',\n      content: '确定要删除此图片吗？',\n      success: function (res) {\n        if (res.confirm) {\n          console.log('点击确定了');\n          tempFilePaths.splice(index, 1);\n        } else if (res.cancel) {\n          console.log('点击取消了');\n          return false;\n        }\n        that.setData({\n          Filepath: tempFilePaths,\n          number: that.data.number - 1\n        });\n        console.log(that.data.Filepath);\n      }\n    })\n\n\n  },\n  upload: function () {\n\n    var that = this\n    if (that.data.telValue.length > 2) {\n      wx.showLoading({\n        title: '上传中...',\n      })\n      if (that.data.number > 1)\n      {\n        Promise.all(that.data.Filepath.map((value) => {\n        return wx.cloud.uploadFile({\n          cloudPath: Date.now() + parseInt(Math.random() * 100) + value.match(/\\.[^.]+?$/)[0],\n          filePath: value,\n        })\n      })).then(res => {\n        return res.map((res) => {\n          return res.fileID\n        });\n      }).then(res => {\n        //console.log(that.data.UserInfo.nickName, that.data.UserInfo.avatarUrl)\n        console.log(app.globalData.openid)\n        const _id=app.globalData.openid\n        const db = wx.cloud.database({ env: 'mfg-6gia7x6l0f60f614' })\n        return db.collection('Assistant_DataSheet').add({ //添加帖子\n              data: {\n                Context: that.data.telValue,\n                Photo_arr: res,\n                Reply_Record_num:0,\n                Up_Record_num:0,\n                Time: util.formatTime(new Date()),\n                Type: that.data.PostType,\n              }\n            }).then(res => {\n            wx.hideLoading();\n            wx.showToast({\n              title: '成功',\n              icon: 'success',\n              duration: 1000,\n              success: function () {\n                console.log(res)\n                wx.switchTab({\n                  url: '../Main_page/Main_page',\n                })\n              }\n            })\n          }).catch((ex) => {\n            console.log(ex);\n          })\n      })\n      }\n      else{\n          \n        const _id = app.globalData.openid\n        const db = wx.cloud.database({ env: 'mfg-6gia7x6l0f60f614' })\n        return db.collection('Assistant_DataSheet').add({ //添加帖子\n          data: {\n            Context: that.data.telValue,\n            Photo_arr: [],\n            Reply_Record_num: 0,\n            Up_Record_num: 0,\n            Time: util.formatTime(new Date()),\n            Type: that.data.PostType,\n          }\n        }).then(res => {\n          wx.hideLoading();\n          wx.showToast({\n            title: '成功',\n            icon: 'success',\n            duration: 1000,\n            success: function () {\n              console.log(res)\n              wx.switchTab({\n                url: '../Main_page/Main_page',\n              })\n            }\n          })\n        })\n\n      }\n    }\n    else {\n      wx.showToast({\n        title: '话题内容字数不够',\n        duration: 1000,\n        mask: true,\n        icon: 'none',\n      })\n    }\n\n\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    \n    var that = this\n    wx.getStorage({\n      key: 'PostType',\n      success(res) {\n        that.setData({\n          PostType:res.data\n        })\n       }\n    })\n    wx.getStorage({\n      key: 'Userinfo',\n      success(res) {\n        console.log(res);  \n        that.setData({\n          UserInfo : res\n        })\n      }\n    })\n  },\n\n})","// miniprogram/pages/Choose_Type/Choose_Type.js\nPage({\n\n  data: {\n\n  },\n\n  onLoad: function (options) {\n   \n  },\n  Touch:function(e){\n    //console.log(parseInt(e.currentTarget.dataset.touch_id))//点击的对应的事件\n\n    //1-学习生活 2心情 3恋爱 \n    let Temp_Type;\n    let item = parseInt(e.currentTarget.dataset.touch_id);\n    switch (item){\n      case 1:Temp_Type = \"学习生活\";break;\n      case 2: Temp_Type = \"心情吐槽\";break;\n      case 3: Temp_Type = \"恋爱日常\";break;\n    }\n    wx.setStorage({\n      key: 'PostType',\n      data: Temp_Type,\n    })\n    if(item>=1 && item<=3){\n      wx.navigateTo({\n        url: '../Creat_Topic/Creat_Topic',\n      })\n   \n    }\n  }\n\n \n})","const db = wx.cloud.database({ env: 'mfg-6gia7x6l0f60f614' })\nconst _ = db.command\nPage({\n\n  data: {\n    replyNumber: 0,\n    toupNumber: 0,\n    chatNumber: 0,\n    hiddenmodalput: true,\n    Username:'',\n    Join_Time:'',\n    User_head_url:'',\n    U_id:'',\n    Oldname:''\n\n  },\n  //点击按钮（天数）\n  modalinput: function () {\n    this.setData({\n      Oldname: this.data.Username,\n      hiddenmodalput: !this.data.hiddenmodalput\n    })\n    console.log(this.data.Oldname)\n  },\n  //取消按钮\n  cancel: function () {\n    let that=this\n    that.setData({\n      hiddenmodalput: true\n    });\n    if (that.data.Oldname != that.data.Username){\n      that.setData({\n        Username:that.data.Oldname\n      });\n    }\n  },\n  //确认修改名字\n  confirm: function (e) {\n    let that=this\n    this.setData({\n      hiddenmodalput: true\n    })\n    if(this.data.Oldname!=this.data.Username){\n      wx.cloud.callFunction({\n        name: 'Assistant_update_Username',\n        data: {\n          Usernewname: that.data.Username,\n          User_inf_id: that.data.U_id\n        },\n        success: function (res) {\n          wx.showToast({\n            title: '修改成功',\n            icon: 'success',\n            duration: 1500\n          })\n        },\n        fail: err => {\n          console.log('error:', err)\n        }\n      })\n    }\n\n  },\n  ChangeName: function(e){\n    this.setData({\n      Username: e.detail.value\n    })\n  },\n  //评论\n  discussbutton: function () {\n    var data = new Date()\n    wx.cloud.callFunction({\n      name: 'upDateDiscuss',\n      data: {\n        youid: wx.getStorageSync(\"myOpenId\"),\n        time: data.getTime()\n      },\n      success: function (res) {\n        console.log(res, \"++++++++++++++\")\n      }\n    })\n    this.setData({\n      replyNumber: 0\n    })\n    wx.navigateTo({\n      url: '../Mine_Reply/Mine_Reply',\n    })\n  },\n //点赞\n  upbutton: function () {\n    var data = new Date()\n    console.log(wx.getStorageSync(\"myOpenId\"), \"--------\", data)\n    wx.cloud.callFunction({\n      name: 'upDateUp',\n      data: {\n        youid: wx.getStorageSync(\"myOpenId\"),\n        time: data.getTime()\n      },\n      success: function (res) {\n        console.log(res, \"-------------\")\n      }\n    })\n    this.setData({\n      toupNumber: 0\n    })\n    wx.navigateTo({\n      url: '../Up_Invitation/Up_Invitation',\n    })\n\n  },\n \n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    var that = this\n    wx.hideTabBarRedDot({\n      index: 1,\n    })\n    let Nowtime=Date.now();\n    db.collection('Assistant_User').where({\n      _openid: wx.getStorageSync(\"myOpenId\"),\n    }).get({\n      success: res => {\n       // console.log(res);\n        if (86400000>(Nowtime - res.data[0].Creat_user_Time))\n        {\n          Nowtime=1;\n        }\n        else{\n          Nowtime=parseInt((Nowtime - res.data[0].Creat_user_Time) / 86400000)+1\n        }\n        console.log(Nowtime)\n        that.setData({\n          Username:res.data[0].Username,\n          User_head_url:res.data[0].User_head_url,\n          Last_to_Reply: res.data[0].Last_to_Reply,\n          Last_toup_Time: res.data[0].Last_toup_Time,\n          U_id:res.data[0]._id,\n          Join_Time: Nowtime\n        })\n        db.collection('Assistant_Up').where({\n          Up_id: wx.getStorageSync(\"myOpenId\"),\n        }).get({\n          success: res => {\n            for (var i = 0; i < res.data.length; i++) {\n             // console.log(\"#######\", res.data[i].Time_s)\n              if (res.data[i].Time_s > that.data.Last_toup_Time) {\n                that.setData({\n                  toupNumber: that.data.toupNumber + 1\n                })\n\n              }\n            }\n          }\n        })\n        db.collection('My_ReplyData').where({\n          PostUserId: wx.getStorageSync(\"myOpenId\"),\n        }).get({\n          success: res => {\n           // console.log(res.data)\n            for (var i = 0; i < res.data.length; i++) {\n              if (res.data[i].time > that.data.Last_toup_Time) {\n                that.setData({\n                  replyNumber: that.data.replyNumber + 1\n                })\n              }\n            }\n          }\n        })\n        db.collection('Assistant_Sell_Intention').where({\n          buypostopenid: wx.getStorageSync(\"myOpenId\"),\n        }).get({\n          success: res => {\n            console.log(\"-------\", res.data)\n            for (var i = 0; i < res.data.length; i++) {\n              if (res.data[i].Time_s > that.data.Last_toup_Time) {//改成最后进入聊天的时间\n                that.setData({\n                  chatNumber: that.data.chatNumber + 1\n                })\n              }\n            }\n          }\n        })\n      }\n    })\n  },\n  //头像\n  uploadhead:function(){\n    let that=this\n    wx.chooseImage({\n      count: 1,\n      sizeType: ['compressed'],\n      sourceType: ['album', 'camera'],\n      success: function (res) {\n          Promise.all(res.tempFilePaths.map((value) => {\n            return wx.cloud.uploadFile({\n              cloudPath: Date.now() + parseInt(Math.random() * 100) + value.match(/\\.[^.]+?$/)[0],\n              filePath: value,\n            })\n          })).then(res => {\n            return res.map((res) => {\n              return res.fileID\n            });\n          }).then(res => {\n            that.setData({\n              User_head_url:res[0]\n            })\n            wx.cloud.callFunction({\n              name: 'Assistant_Up_Userhead',\n              data: {\n                User_head: res[0],\n                User_inf_id:that.data.U_id\n              },\n              success: function (res) {\n                wx.showToast({\n                  title: '修改成功',\n                  icon: 'success',\n                  duration: 1500\n                })\n              },\n              fail: err => {\n                console.log('error:', err)\n              }\n            })\n          }).catch((exp) => {\n            console.log(exp);\n          })\n\n      }\n    });\n\n  }, \n  //关于我们\n  ShowAboutus:function()\n  {\n        wx.showToast({\n         title: '没有名字组.',\n          image: '../../images/zhichi.png',\n          duration: 3000\n        })\n  },\n  //我的发布\n  toMinemypost:function(){\n    wx.navigateTo({\n      url: '../Mine_Mypost/Mine_Mypost',\n    })\n  }\n})","// miniprogram/pages/delete-Reply-Word/delete-Reply-Word.js\nvar time = require('../../utils/util.js')\nvar app = getApp();\nconst db = wx.cloud.database();\nPage({\n  /**\n   * 页面的初始数据\n   */\n  //定义所需要用到的变量data\n  data: {\n    discussShow: false,\n    inputMessage: '',\n    SendTime: '',\n    Time: '',\n    HeadImageUrl: '',\n    UserName: '',\n    PageId: '',\n    UpPageId: '',\n    RemoveId: '',\n    PostUserId: '',\n    ReplyOpenId: '',\n    PageData: [],\n    dataArray: [],\n    PostUserData: [],\n  },\n\n actionSheetTap: function () {\n    this.setData({\n      actionSheetHidden: !this.data.actionSheetHidden\n    })\n  },\n\n  actionSheetbindchange: function () {\n    this.setData({\n      actionSheetHidden: !this.data.actionSheetHidden\n    })\n  },\n\n  bindMenu1: function () {\n    this.setData({\n      menu: 1,\n      actionSheetHidden: !this.data.actionSheetHidden\n    })\n  },\n  //添加自己的评论\n  formSubmit: function (e) {\n    var that = this;\n    //that.data.SendTime = time.formatTime(new Date)\n    //console.log(that.data.SendTime)\n   // console.log('点击评论')\n    wx.showToast({\n      title: '评论成功',\n      icon: 'none'\n    })\n    //console.log(e.detail.value)\n    this.setData({\n      discussShow: true,\n      inputMessage: e.detail.value.userName,\n      SendTime: Date.now(),\n      Time: time.formatTime(new Date)\n    })\n    wx.cloud.database().collection('Assistant_DataSheet').doc(e.value._id) //这里需要改\n    .update({\n      data:{\n        Reply_Record_num:Reply_Record_num+1\n      }\n    })\n    /*console.log(that.data.inputMessage)\n    console.log(that.data.SendTime)\n    console.log(that.data.PageId)\n    console.log(that.data.Time)*/\n\n    //wx.cloud.callFunction({\n      //name: 'reply',\n      //data: {\n        /*Reply_Context: that.data.inputMessage,\n        Reply_Head_url: that.data.HeadImageUrl,\n        Reply_Time:that.data.SendTime,\n        Reply_Username: that.data.UserName,*/\n       // Page_id: that.data.PageId\n      //},\n      //success: function (res) {\n       // console.log(res.result)\n      //}\n   // })\n\n    db.collection('My_ReplyData').add({\n      data: {\n        context: that.data.inputMessage,\n        image: that.data.HeadImageUrl,\n        time: that.data.SendTime,\n        name: that.data.UserName,\n        PageId: that.data.PageId,\n        PostUserId: that.data.PostUserId,\n        PageTime: that.data.Time\n      }, success: function (res) {\n        that.setData({\n          inputMessage: ''\n        })\n        //刷新页面数据\n        db.collection('My_ReplyData').where({\n          PageId: that.data.PageId\n        }).get({\n          success: function (res) {\n            that.setData({\n              dataArray: res.data\n            })\n          }\n        })\n      }\n    })\n  },\n  //删除评论\n  Remove_Post: function (e) {\n    let that = this\n    wx.showModal({\n      title: '提示',\n      content: '请问是否删除本条评论？',\n      success: function (res) {\n        if (res.confirm) {\n          console.log(e.currentTarget.dataset.post_id)//事件的id\n          wx.cloud.callFunction({\n            name: 'Remove_Reply',\n            data: {\n              Page_id: e.currentTarget.dataset.post_id,\n            },\n            success: function (res) {\n            //  console.log(\"删除成功！\")\n              //刷新页面数据\n              db.collection('My_ReplyData').where({\n                PageId: that.data.PageId\n              }).get({\n                success: function (res) {\n                  that.setData({\n                    dataArray: res.data\n                  })\n                }\n              })\n            }\n          })\n          wx.cloud.callFunction({\n            name: 'Remove_Reply_DataSheet',\n            data: {\n              Page_id: that.data.PageId,\n            },\n            sucesss: function (res) {\n             // console.log(\"我也删除成功！\")\n            }\n          })\n        }\n      }\n    })\n\n\n  },\n  //获取是否已经有别人评论的信息\n  onLoad: function (options) {\n    var that = this;\n    wx.getStorage({\n      key: 'key',\n      success(res) {\n        that.setData({\n          PageId: res.data.post_id,\n          PostUserId: res.data.postopenid\n        })\n\n        //根据贴子ID来查找贴子的内容\n        db.collection('Assistant_DataSheet').doc(that.data.PageId).get({\n          success: function (res) {\n            that.setData({\n              PageData: res.data\n            })\n           // console.log(\"我是第一个\", that.data.PageData.Photo_arr)\n          }\n        })\n\n       // console.log(\"我是pageid\", that.data.PageId)\n        //根据贴子的ID获取贴子下面的回复内容\n        db.collection('My_ReplyData').where({\n          PageId: that.data.PageId\n        }).get({\n          success: function (res) {\n            that.setData({\n              dataArray: res.data,\n              RemoveId: res.data._id\n            })\n            //console.log(\"我是记录ID\",RemoveId)\n           // console.log(\"我是第三个\")\n          }\n        })\n\n        //根据发帖人的openid查找他的头像和用户名\n        db.collection('Assistant_User').where({\n          _openid: that.data.PostUserId\n        }).get({\n          success: function (res) {\n            that.setData({\n              PostUserData: res.data\n            })\n            //console.log(\"我是第二个\", that.data.PostUserData)\n          }\n        })\n\n        //获取自己的头像和用户名，使其可以在评论栏显示。\n        db.collection('Assistant_User').where({\n          _openid: app.globalData.openid\n        }).get({\n          success: function (res) {\n            that.setData({\n              HeadImageUrl: res.data[0].User_head_url,\n              UserName: res.data[0].Username,\n              ReplyOpenId: res.data[0]._openid\n            })\n           // console.log(\"我是用户的头像和姓名：\", that.data.HeadImageUrl)\n          }\n        })\n      }\n    })\n  },\n\n  onPullDownRefresh: function () {\n    var that = this;\n    wx.showNavigationBarLoading();\n  },\n})","//index.js\n//获取应用实例\nconst db = wx.cloud.database({ env: 'mfg-6gia7x6l0f60f614' })\nvar util = require(\"../../utils/util.js\")\nconst _ = db.command\nconst app = getApp()\n\nconst myOpenId = wx.getStorageSync(\"myOpenId\")\nPage({\n  data: {\n    color1: \"#3B49E0\",\n    color2: \"#dbdbdb\",\n    size1: \"40rpx\",\n    size2: \"35rpx\",\n    flag: 0,\n    upList: [\n\n    ],\n\n  },\n\n\n  click: function (e) {\n    if (e.currentTarget.id == \"v1\") {\n      this.searchAssistantUp()\n      this.setData({\n        flag: 0,\n        color2: \"#dbdbdb\",\n        color1: \"#3B49E0\",\n        size1: \"40rpx\",\n        size2: \"35rpx\",\n      })\n    }\n    else {\n      this.someUpAssistant()\n      this.setData({\n        flag: 1,\n        color1: \"#dbdbdb\",\n        color2: \"#3B49E0\",\n        size1: \"35rpx\",\n        size2: \"40rpx\",\n      })\n    }\n  },\n\n  someUpAssistant: function ()//我点赞别人\n  {\n    var that = this\n    this.setData({\n      upList: []\n    })\n    db.collection('Assistant_Up').where({ //点赞列表有自己说明有人点赞\n      _openid: myOpenId\n    }).get({\n      success: res => {\n        for (var j = 0; j < res.data.length; j++) {\n          let index = res.data.length - j - 1\n          var upUserTimeHour = 'upList[' + index + '].upUserTimeHour';\n          var upUserTimeDay = 'upList[' + index + '].upUserTimeDay';\n          var upUserId = 'upList[' + index + '].upUserId';\n          var upPostId = 'upList[' + index + '].upPostId';\n          var time = util.formatTime(res.data[j].Time_s)//格式化时间\n          console.log(time)\n          that.setData({\n            [upUserTimeHour]: time.substr(time.indexOf(\" \") + 1, 5),//时\n            [upUserTimeDay]: time.substr(time.indexOf(\"-\") + 1, 5), //分\n            [upUserId]: res.data[index].Up_id,  //点赞谁的id\n            [upPostId]: res.data[index].Up_Post_id,//谁点赞的帖子id\n          })\n\n          db.collection('Assistant_DataSheet').where({\n            _id: res.data[index].Up_Post_id\n          }).get({\n            success: res => {\n              var context = 'upList[' + index + '].context';//获取帖子内容\n              that.setData({\n                [context]: res.data[0].Context\n              })\n            }\n          })\n          db.collection('Assistant_User').where({\n            _openid: res.data[index].Up_id\n          }).get({\n            success: res => {\n              let headUrl = 'upList[' + index + '].headUrl';//获取头像\n              let userName = 'upList[' + index + '].userName';//获取名字\n              that.setData({\n                [headUrl]: res.data[0].User_head_url,\n                [userName]: res.data[0].Username\n              })\n            }\n          })\n        }\n      }\n    })\n  },\n\n  searchAssistantUp: function ()//别人点赞我\n  {\n    var that = this\n    this.setData({\n      upList: []\n    })\n    db.collection('Assistant_Up').where({ //点赞列表有自己说明有人点赞\n      Up_id: myOpenId\n    }).get({\n      success: res => {\n        for (var j = 0; j < res.data.length; j++) {\n\n          let index = res.data.length - j - 1\n          var upUserTimeHour = 'upList[' + index + '].upUserTimeHour';\n          var upUserTimeDay = 'upList[' + index + '].upUserTimeDay';\n          var upUserId = 'upList[' + index + '].upUserId';\n          var upPostId = 'upList[' + index + '].upPostId';\n          var upOpenId = 'upList[' + index + '].upOpenId';\n          var time = util.formatTime(res.data[j].Time_s)//格式化时间\n\n          that.setData({\n            [upUserTimeHour]: time.substr(time.indexOf(\" \") + 1, 5),//时\n            [upUserTimeDay]: time.substr(time.indexOf(\"-\") + 1, 5), //分\n            [upUserId]: res.data[index].Up_id,  //点赞谁的id\n            [upPostId]: res.data[index].Up_Post_id,//谁点赞的帖子id\n            [upOpenId]: res.data[index]._openid,//是谁点赞id\n          })\n\n          db.collection('Assistant_DataSheet').where({\n            _id: res.data[index].Up_Post_id\n          }).get({\n            success: res => {\n              var context = 'upList[' + index + '].context';//获取帖子内容\n              that.setData({\n                [context]: res.data[0].Context\n              })\n            }\n          })\n          db.collection('Assistant_User').where({\n            _openid: res.data[index]._openid\n          }).get({\n            success: res => {\n              let headUrl = 'upList[' + index + '].headUrl';//获取头像\n              let userName = 'upList[' + index + '].userName';//获取名字\n              that.setData({\n                [headUrl]: res.data[0].User_head_url,\n                [userName]: res.data[0].Username\n              })\n            }\n          })\n        }\n\n      },\n\n    })\n\n  },\n  gotoPost: function (e) {\n    //wx.clearStorageSync(\"key\")\n    wx.setStorageSync('key', e.currentTarget.dataset)\n    /*wx.setStorage({\n      key: \"key\",\n      data: \n    })*/\n    console.log(e.currentTarget.dataset)\n    wx.navigateTo({\n      url: '../Reply_page/Reply_page',\n      success: function (res) { console.log(\"我去评论页啦！\") },\n      fail: function (res) { console.log(\"诶，我怎么还在原地？\") }\n    })\n  },\n  onLoad: function () {\n    this.searchAssistantUp()\n  },\n\n})\n","const db = wx.cloud.database({ env: 'mfg-6gia7x6l0f60f614' })\nvar util = require(\"../../utils/util.js\")\nconst _ = db.command\nconst app = getApp()\nconst myOpenId = wx.getStorageSync(\"myOpenId\")\nPage({\n\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    color1: \"#3B49E0\",\n    color2: \"#dbdbdb\",\n    size1: \"40rpx\",\n    size2: \"35rpx\",\n    discussList:\n      [\n\n      ]\n  },\n  click: function (e) {\n    if (e.currentTarget.id == \"v1\") {\n      this.discussMe()\n      this.setData({\n        flag: 0,\n        color2: \"#dbdbdb\",\n        color1: \"#3B49E0\",\n        size1: \"40rpx\",\n        size2: \"35rpx\",\n      })\n    }\n    else {\n      this.myDiscuss()\n      this.setData({\n        flag: 1,\n        color1: \"#dbdbdb\",\n        color2: \"#3B49E0\",\n        size1: \"35rpx\",\n        size2: \"40rpx\",\n      })\n    }\n  },\n  myDiscuss() {\n    var that = this\n    this.setData({\n      discussList: []\n    })\n    console.log(\"opneid....\", myOpenId)\n    db.collection('My_ReplyData').where({ //我的评论\n      _openid: myOpenId\n    }).get({\n      success: res => {\n\n        for (let i = 0; i < res.data.length; i++) {\n          let index = res.data.length - i - 1\n          var discussUserId = 'discussList[' + index + '].discussUserId';\n          var discussPostId = 'discussList[' + index + '].discussPostId';\n          var discussTimeHour = 'discussList[' + index + '].discussTimeHour';\n          var discussTimeDay = 'discussList[' + index + '].discussTimeDay';\n          var time = util.formatTime(res.data[i].time)\n          that.setData({\n            [discussUserId]: res.data[index].PostUserId,\n            [discussPostId]: res.data[index].PageId,\n            [discussTimeHour]: time.substr(time.indexOf(\" \") + 1, 5),\n            [discussTimeDay]: time.substr(time.indexOf(\"-\") + 1, 5),\n          })\n          db.collection('Assistant_User').where({\n            _openid: res.data[index].PostUserId\n          }).get({\n            success: res => {\n              console.log(\"----\", res.data)\n              var postUserName = 'discussList[' + index + '].postUserName';\n              var postHeadUrl = 'discussList[' + index + '].postHeadUrl';\n              that.setData({\n                [postUserName]: res.data[0].Username,\n                [postHeadUrl]: res.data[0].User_head_url,\n              })\n\n            }\n          })\n          db.collection('Assistant_DataSheet').where({\n            _id: res.data[index].PageId,\n          }).get({\n            success: res => {\n              var postContext = 'discussList[' + index + '].postContext';\n              that.setData({\n                [postContext]: res.data[0].Context,\n              })\n            }\n          })\n        }\n\n      }\n    })\n  },\n  discussMe: function () {\n    var that = this\n    this.setData({\n      discussList: []\n    })\n    db.collection('My_ReplyData').where({ //别人评论我\n      PostUserId: myOpenId\n    }).get({\n      success: res => {\n        console.log(res.data)\n        for (let i = 0; i < res.data.length; i++) {\n          let index = res.data.length - i - 1\n          var postOpenid = 'discussList[' + index + '].discussUserId';\n          var discussPostId = 'discussList[' + index + '].discussPostId';\n          var discussTimeHour = 'discussList[' + index + '].discussTimeHour';\n          var discussTimeDay = 'discussList[' + index + '].discussTimeDay';\n          var time = util.formatTime(res.data[i].time)//格式化时间\n          that.setData({\n            [postOpenid]: res.data[index]._openid,\n            [discussPostId]: res.data[index].PageId,\n            [discussTimeHour]: time.substr(time.indexOf(\" \") + 1, 5),\n            [discussTimeDay]: time.substr(time.indexOf(\"-\") + 1, 5),\n          })\n          console.log(\"-------\", res.data[index]._openid)\n          db.collection('Assistant_User').where({\n            _openid: res.data[index]._openid\n          }).get({\n            success: res => {\n              var postUserName = 'discussList[' + index + '].postUserName';\n              var postHeadUrl = 'discussList[' + index + '].postHeadUrl';\n              that.setData({\n                [postUserName]: res.data[0].Username,\n                [postHeadUrl]: res.data[0].User_head_url,\n              })\n\n            }\n          })\n          db.collection('Assistant_DataSheet').where({\n            _id: res.data[index].PageId,\n          }).get({\n            success: res => {\n              var postContext = 'discussList[' + index + '].postContext';\n              that.setData({\n                [postContext]: res.data[0].Context,\n              })\n            }\n          })\n        }\n      }\n    })\n  },\n  gotoPost: function (e) {\n    //wx.clearStorageSync(\"key\")\n    wx.setStorageSync('key', e.currentTarget.dataset)\n   /* wx.setStorage({\n      key: \"key\",\n      data: e.currentTarget.dataset\n    })*/\n    console.log(e.currentTarget.dataset)\n    wx.navigateTo({\n      url: '../Reply_page/Reply_page',\n      success: function (res) { console.log(\"我去评论页啦！\") },\n      fail: function (res) { console.log(\"诶，我怎么还在原地？\") }\n    })\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    this.discussMe()\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n})","var app = getApp()\nvar util = require('../../utils/util.js');\nvar template = require('../../template/template.js');\nvar allId = new Array()\nvar allUpId = new Array()\nPage({\n\n  data: {\n    currentTab: 0,\n    DataPost_arry: [],\n    User_head_url_arry: [],\n    Up_array: [],\n    Username_arry: [],\n    UserId: '',//app.globalData.openid\n    replyData: []\n  },\n\n  /** \n     * 预览图片\n     */\n  previewImage: function (e) {\n    //var current = e.target.dataset.src;\n    wx.previewImage({\n      //current: current, // 当前显示图片的http链接\n      urls: [e.target.dataset.myimg], // 需要预览的图片http链接列表\n    })\n  },\n\n  navbarTap: function (e) {\n    this.setData({\n      currentTab: e.currentTarget.dataset.idx\n    })\n    if (e.currentTarget.dataset.idx == 0) { this.get_DBinf(); }\n    else { this.get_Sell_DBinf(); }\n  },\n\n  onLoad() {\n    let that = this\n  },\n\n  upclickbutton: function (e) {\n    var that = this\n    var ind = e.currentTarget.dataset.nowindex\n    //console.log(\"Post_id:\" + e.currentTarget.dataset.post_id)\n    const postuserid = e.currentTarget.dataset.postopenid\n\n    //console.log(this.data.Up_array[ind] == 0)\n\n    if (this.data.Up_array[ind] == 0)//说明没点赞过\n    {\n\n      var nowup = 'Up_array[' + ind + ']'//设置为点赞过\n      this.setData({\n        [nowup]: 1\n      })\n      const db = wx.cloud.database({ env: 'mfg-6gia7x6l0f60f614' })\n      return db.collection('Assistant_Up').add({ //添加帖子\n        data: {\n          Up_Post_id: e.currentTarget.dataset.post_id,\n          Up_id: e.currentTarget.dataset.postopenid,\n          Time_s: Date.now()\n        }\n      }).then(res => {\n        console.log(\"Assistant_Up OK!\");\n        console.log(\"Pick the post_id:\" + e.currentTarget.dataset.post_id);\n        wx.cloud.callFunction({\n          name: 'Up_Assistant_Post',\n          data: {\n            Post_id: e.currentTarget.dataset.post_id,\n          },\n          success: function (res) {\n            console.log(\"Up_Assistant_Post OK!\");\n            that.get_DBinf()\n            wx.showToast({\n              title: '已点赞',\n              image: '../../images/Up_heart.png',\n              duration: 2000\n            })\n          },\n          fail: err => {\n            console.log('error:', err)\n          }\n        })\n      })\n    }\n    else {\n      wx.showToast({\n        title: '已点赞过',\n        image: '../../images/Up_heart2.png',\n        duration: 2000\n      })\n    }\n  },\n\n\n  Remove_Post: function (e) {\n    let that = this\n    wx.showModal({\n      title: '提示',\n      content: '请问是否删除本条树洞？',\n      success: function (res) {\n        if (res.confirm) {\n          console.log(e.currentTarget.dataset.post_id)//事件的id\n          wx.cloud.callFunction({\n            name: 'Remove_Assistant_DataSheet',\n            data: {\n              youid: e.currentTarget.dataset.post_id,\n            },\n            success: function (res) {\n              that.get_DBinf()\n            }\n          })\n        }\n      }\n    })\n  },\n\n  to_Reply: function (e) {\n    let that = this\n    console.log(e.currentTarget.dataset.post_id);//事件的id\n    console.log(e.currentTarget.dataset.postopenid);//创建表的用户openid\n    //console.log(e.currentTarget.dataset)\n    that.setData({\n      replyData: e.currentTarget.dataset\n    })\n    console.log(that.data.replyData)\n    wx.setStorage({\n      key: \"key\",\n      data: that.data.replyData\n    })\n    wx.navigateTo({\n\n      url: '../Reply_page/Reply_page',\n      success: function (res) { console.log(\"我去评论页啦！\") },\n      fail: function (res) { console.log(\"诶，我怎么还在原地？\") }\n    })\n  },\n\n  onShow() {\n    this.get_DBinf();\n  },\n\n  get_DBinf: function () {\n    let that = this\n    wx.getStorage({\n      key: 'User_openid',\n      success(res) {\n        that.setData({\n          UserId: res.data\n        })\n        ////\n        var db = wx.cloud.database()//{ env: 'mfg-6gia7x6l0f60f614' }\n        let userid = res.data;\n        console.log(\"My openid:\" + res.data);\n        db.collection('Assistant_Up').where({//获取自己的点赞列表\n          _openid: userid\n        }).get({\n          success: res => {\n\n\n            for (var i = 0; i < res.data.length; i++) {\n              allUpId[i] = res.data[i].Up_Post_id//点赞列表赋给allUpId\n            }\n\n            db.collection('Assistant_DataSheet').get({\n              success: res => {\n                //console.log(\"Assistant_DataSheet Res\"+res);\n                that.setData({\n                  alldata: res.data//所有的用户列表数据\n                })\n                for (var i = 0; i < res.data.length; i++) {\n                  allId[i] = res.data[i]._id  //所有的用户列表_id\n                  if (allUpId.indexOf(allId[i]) == -1) {\n                    var item = 'Up_array[' + i + ']'\n                    that.setData({\n                      [item]: 0\n                    })\n                  }\n                  else {\n                    var item = 'Up_array[' + i + ']'\n                    that.setData({\n                      [item]: 1\n                    })\n                  }\n                }\n                //console.log(that.data.Up_array)\n              }\n            })\n          },\n        })\n        const get_inf_db = wx.cloud.database()//{ env: 'mfg-6gia7x6l0f60f614' }\n        get_inf_db.collection('Assistant_DataSheet').where({\n          _openid: res.data\n        }).get({\n          success: res => {\n            that.setData({\n              DataPost_arry: res.data\n            })\n            Promise.all(res.data.map((item) => {\n              return item._openid\n            })).then(res => {\n              let _ = get_inf_db.command;\n              get_inf_db.collection('Assistant_User').where({\n                _openid: _.in(res)\n              }).get().then(res => {\n                that.data.Username_arry = [];\n                that.data.User_head_url_arry = [];\n                for (let i = 0; i < that.data.DataPost_arry.length; i++) {\n                  let openId = that.data.DataPost_arry[i]._openid;\n                  for (let j = 0; j < res.data.length; j++) {\n                    if (openId == res.data[j]._openid) {\n                      that.data.Username_arry.push(res.data[j].Username);\n                      that.data.User_head_url_arry.push(res.data[j].User_head_url);\n                    }\n                  }\n                }\n                that.setData({\n                  Username_arry: that.data.Username_arry,\n                  User_head_url_arry: that.data.User_head_url_arry\n                });\n                //console.log(that.data.Username_arry)\n              })\n\n            }).catch((ex) => {\n              console.log(ex);\n            })\n\n          }\n        })\n\n      }\n    })\n\n  },\n  /*get_DBinf: function () {\n    let that = this\n    wx.getStorage({\n      key: 'User_openid',\n      success(res) {\n        that.setData({\n          UserId: res.data\n        })\n        console.log(res.data);\n        const get_inf_db = wx.cloud.database()//{ env: 'mfg-6gia7x6l0f60f614' }\n        get_inf_db.collection('Assistant_DataSheet').where({\n          _openid: res.data\n        }).get({\n          success: res => {\n            that.setData({\n              DataPost_arry: res.data\n            })\n            Promise.all(res.data.map((item) => {\n              return item._openid\n            })).then(res => {\n              let _ = get_inf_db.command;\n              get_inf_db.collection('Assistant_User').where({\n                _openid: _.in(res)\n              }).get().then(res => {\n                that.data.Username_arry = [];\n                that.data.User_head_url_arry = [];\n                for (let i = 0; i < that.data.DataPost_arry.length; i++) {\n                  let openId = that.data.DataPost_arry[i]._openid;\n                  for (let j = 0; j < res.data.length; j++) {\n                    if (openId == res.data[j]._openid) {\n                      that.data.Username_arry.push(res.data[j].Username);\n                      that.data.User_head_url_arry.push(res.data[j].User_head_url);\n                    }\n                  }\n                }\n                that.setData({\n                  Username_arry: that.data.Username_arry,\n                  User_head_url_arry: that.data.User_head_url_arry\n                });\n              })\n\n            }).catch((ex) => {\n              console.log(ex);\n            })\n\n          }\n        })\n\n\n\n      },\n\n    })\n\n  },*/\n})\n","const db = wx.cloud.database({ env: 'mfg-6gia7x6l0f60f614' })\nconst _ = db.command\nvar util = require(\"../../utils/util.js\")\nconst app = getApp()\nPage({\n\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    wantList: [\n    ],\n    wantListYou: [],\n  },\n  gotoChat: function (e) {\n    console.log(e.currentTarget.dataset.heopenid)\n    wx.setStorageSync(\"chatOpenid\", e.currentTarget.dataset.heopenid)\n    wx.navigateTo({\n      url: '../chat/chat',\n    })\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  youWant: function ()//别人想要我的\n  {\n    var that = this\n    db.collection('Assistant_Sell_Intention').where({\n      buypostopenid: wx.getStorageSync(\"myOpenId\"),//我的openid== 被购买的openid\n    }).get({\n      success: res => {\n        console.log(\"xxxxxxxxxx\", res.data)\n        for (let i = 0; i < res.data.length; i++) {\n          let index = res.data.length - i - 1\n          var wantOpenid = 'wantList[' + index + '].wantOpenid';\n          var wantUserTimeDay = 'wantList[' + index + '].wantUserTimeDay';\n          var wantMyGoodsId = 'wantList[' + index + '].wantMyGoodsId';\n          var time = util.formatTime(res.data[i].Time_s)//格式化时间\n          that.setData({\n            [wantUserTimeDay]: time, //时间\n            [wantMyGoodsId]: res.data[i].buy_Post_id,//他买东西_id\n            [wantOpenid]: res.data[i]._openid,//他的 openid\n          })\n\n          db.collection('Assistant_User').where({\n            _openid: res.data[i]._openid,\n          }).get({\n            success: res => {\n              var headUrl = 'wantList[' + index + '].headUrl';//获取头像\n              var userName = 'wantList[' + index + '].userName';//获取名字\n              that.setData({\n                [headUrl]: res.data[0].User_head_url,\n                [userName]: res.data[0].Username\n              })\n            }\n          })\n          db.collection('Assistant_Sell_DataSheet').where({\n            _id: res.data[i].buy_Post_id\n          }).get({\n            success: res => {\n              console.log(res.data[0].Type)\n              var saleType = 'wantList[' + index + '].saleType';//获取类型\n              that.setData({\n                [saleType]: res.data[0].Type,\n              })\n            }\n          })\n        }\n      }\n    })\n  },\n  iWant: function () {\n    var that = this\n    console.log(\"============\", wx.getStorageSync(\"myOpenId\"))\n    db.collection('Assistant_Sell_Intention').where({\n      _openid: wx.getStorageSync(\"myOpenId\"),\n    }).get({\n      success: res => {\n        console.log(\"aaaaaaaaaaa\", res.data)\n        for (let i = 0; i < res.data.length; i++) {\n          let index = res.data.length - i - 1\n          console.log(\"-----\", index)\n          var wantOpenid = 'wantListYou[' + index + '].wantOpenid';\n          var wantUserTimeDay = 'wantListYou[' + index + '].wantUserTimeDay';\n          var wantMyGoodsId = 'wantListYou[' + index + '].wantMyGoodsId';\n          var time = util.formatTime(res.data[i].Time_s)//格式化时间\n          that.setData({\n            [wantUserTimeDay]: time, //时间\n            [wantMyGoodsId]: res.data[i].buy_Post_id,//我购买的东西_id\n            [wantOpenid]: res.data[i].buypostopenid,//我想要他的openid\n          })\n\n          db.collection('Assistant_User').where({\n            _openid: res.data[i].buypostopenid,\n          }).get({\n            success: res => {\n              var headUrl = 'wantListYou[' + index + '].headUrl';//获取头像\n              var userName = 'wantListYou[' + index + '].userName';//获取名字\n              that.setData({\n                [headUrl]: res.data[0].User_head_url,\n                [userName]: res.data[0].Username\n              })\n            }\n          })\n          console.log(\"******\", res.data[i].buy_Post_id)\n          db.collection('Assistant_Sell_DataSheet').where({\n            _id: res.data[i].buy_Post_id\n          }).get({\n            success: res => {\n              console.log(res.data[0].Type)\n              var saleType = 'wantListYou[' + index + '].saleType';//获取类型\n              that.setData({\n                [saleType]: res.data[0].Type,\n              })\n            }\n          })\n        }\n      }\n    })\n  },\n  onLoad: function (options) {//Assistant_Sell_Intention\n    this.iWant()\n    this.youWant()\n\n  },\n  show: function () {\n    console.log(this.data.wantList)\n  },\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n})","const db = wx.cloud.database({ env: 'mfg-6gia7x6l0f60f614' })\nvar util = require(\"../../utils/util.js\")\nconst _ = db.command\nconst app = getApp()\nPage({\n\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    myName:\"\",\n    heName: \"\",\n    myUrl: \"\",\n    heUrl: \"\",\n    chatId:\"\",\n    chatMyOpenid: \"\",\n    chatYouOpenid: \"\",\n    type:\"\",\n    telValue:\"\",\n    chatList:[]\n  },\n  getInput: function (e) {\n    this.setData({\n      telValue: e.detail.value\n    })\n  },\n  sendInf:function()//发送按钮\n  {\n    var that=this\n    console.log(\"------------\", this.data.chatId)\n    if (this.data.telValue.length > 0 && this.data.telValue!=\" \")\n    {\n      var time = JSON.stringify(util.formatTime(new Date())).replace(/\"/g, \"\")\n      var chatId = this.data.chatId\n      var telValue=this.data.telValue\n      var type = this.data.type\n      console.log(\"-----\", time, \"-----\", \"-----\", telValue, chatId, type )\n      wx.cloud.callFunction({\n        name: 'sendInf',\n        data: {\n          chatId: chatId,\n          time: time,\n          telValue: telValue,\n          type: type\n        },\n        success: res => {\n          console.log(res)\n          this.iChatyou()\n          this.youChatMe()\n          that.setData({\n            telValue: \"\"\n          })\n        }\n      })\n    }\n    else\n    {\n      wx.showToast({\n        title: '消息为空',\n        icon: 'none',\n        duration: 500,\n        mask: true\n      })\n    }\n    \n  },\niChatyou:function()\n{\n  var that = this\n  console.log(\"myOpenId      \",wx.getStorageSync(\"myOpenId\"))\n  console.log(\"chatOpenid      \", wx.getStorageSync(\"chatOpenid\"))\n  db.collection('Chat_Record').where({ //获取符合两个id的表\n    _openid: wx.getStorageSync(\"myOpenId\"),\n    youOpenid: wx.getStorageSync(\"chatOpenid\"),\n  }).get({\n    success: res => {\n      console.log(\"uuuuuuuuuuuuuu\", res.data)\n      if (res.data.length != 0) {\n        that.setData({\n          type: 0,\n          chatId: res.data[0]._id,\n          chatMyOpenid: res.data[0]._openid,\n          chatYouOpenid: res.data[0].youOpenid,\n        })\n        for (let i = 0; i < res.data[0].content.length; i++) {\n          var content = 'chatList[' + i + '].content';\n          var time = 'chatList[' + i + '].time';\n          var who = 'chatList[' + i + '].who';\n          that.setData({\n            [content]: res.data[0].content[i],\n            [time]: res.data[0].time[i],\n            [who]: res.data[0].who[i],\n          })\n        }\n      }\n    }\n  })\n},\nyouChatMe:function()\n{\n  var that = this\n  db.collection('Chat_Record').where({ //获取符合两个id的表\n    _openid: wx.getStorageSync(\"chatOpenid\"),\n    youOpenid: wx.getStorageSync(\"myOpenId\"),\n  }).get({\n    success: res => {\n      console.log(\"xxxxxxxxxxxxxxx\", res.data)\n      if (res.data.length != 0) {\n        that.setData({\n          type: 1,\n          chatId: res.data[0]._id,\n          chatMyOpenid: res.data[0]._openid,\n          chatYouOpenid: res.data[0].youOpenid,\n        })\n        for (let i = 0; i < res.data[0].content.length; i++) {\n          var content = 'chatList[' + i + '].content';\n          var time = 'chatList[' + i + '].time';\n          var who = 'chatList[' + i + '].who';\n          that.setData({\n            [content]: res.data[0].content[i],\n            [time]: res.data[0].time[i],\n            [who]: res.data[0].who[i],\n          })\n        }\n      }\n    }\n  })\n},\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    var that=this\n    this.iChatyou()\n    this.youChatMe()\n  \n    db.collection('Assistant_User').where({\n      _openid: wx.getStorageSync(\"myOpenId\")//我的用户表\n    }).get({\n      success: res => {\n        that.setData({\n          myUrl: res.data[0].User_head_url,\n          myName: res.data[0].Username,\n        })\n      }\n    })\n    db.collection('Assistant_User').where({\n      _openid: wx.getStorageSync(\"chatOpenid\")//他的用户表\n    }).get({\n      success: res => {\n        that.setData({\n          heUrl: res.data[0].User_head_url,\n          heName: res.data[0].Username,\n        })\n      }\n    })\n   \n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n})"],"wx":{"version":1,"userVersion":"1.0.0","userNotes":"0222第一版本","packageVersion":"1c6fb93b2b9100d0fe5ff3c5624d304e"}}